{"contractName":"ECRecovery","abi":[],"sourceMap":"300:1647:46:-;;132:2:-1;166:7;155:9;146:7;137:37;252:7;246:14;243:1;238:23;232:4;229:33;270:1;265:20;;;;222:63;;265:20;274:9;222:63;;298:9;295:1;288:20;328:4;319:7;311:22;352:7;343;336:24","deployedSourceMap":"300:1647:46:-;;;;;;;;","source":"pragma solidity ^0.4.24;\n\n\n/**\n * @title Eliptic curve signature operations\n * @dev Based on https://gist.github.com/axic/5b33912c6f61ae6fd96d6c4a47afde6d\n * TODO Remove this library once solidity supports passing a signature to ecrecover.\n * See https://github.com/ethereum/solidity/issues/864\n */\n\nlibrary ECRecovery {\n\n  /**\n   * @dev Recover signer address from a message by using their signature\n   * @param hash bytes32 message, the hash is the signed message. What is recovered is the signer address.\n   * @param sig bytes signature, the signature is generated using web3.eth.sign()\n   */\n  function recover(bytes32 hash, bytes sig)\n    internal\n    pure\n    returns (address)\n  {\n    bytes32 r;\n    bytes32 s;\n    uint8 v;\n\n    // Check the signature length\n    if (sig.length != 65) {\n      return (address(0));\n    }\n\n    // Divide the signature in r, s and v variables\n    // ecrecover takes the signature parameters, and the only way to get them\n    // currently is to use assembly.\n    // solium-disable-next-line security/no-inline-assembly\n    assembly {\n      r := mload(add(sig, 32))\n      s := mload(add(sig, 64))\n      v := byte(0, mload(add(sig, 96)))\n    }\n\n    // Version of signature should be 27 or 28, but 0 and 1 are also possible versions\n    if (v < 27) {\n      v += 27;\n    }\n\n    // If the version is correct return the signer address\n    if (v != 27 && v != 28) {\n      return (address(0));\n    } else {\n      // solium-disable-next-line arg-overflow\n      return ecrecover(hash, v, r, s);\n    }\n  }\n\n  /**\n   * toEthSignedMessageHash\n   * @dev prefix a bytes32 value with \"\\x19Ethereum Signed Message:\"\n   * and hash the result\n   */\n  function toEthSignedMessageHash(bytes32 hash)\n    internal\n    pure\n    returns (bytes32)\n  {\n    // 32 is the length in bytes of hash,\n    // enforced by the type signature above\n    return keccak256(\n      abi.encodePacked(\"\\x19Ethereum Signed Message:\\n32\", hash)\n    );\n  }\n}\n","sourcePath":"openzeppelin-solidity/contracts/ECRecovery.sol","ast":{"absolutePath":"openzeppelin-solidity/contracts/ECRecovery.sol","exportedSymbols":{"ECRecovery":[18177]},"id":18178,"nodeType":"SourceUnit","nodes":[{"id":18098,"literals":["solidity","^","0.4",".24"],"nodeType":"PragmaDirective","src":"0:24:46"},{"baseContracts":[],"contractDependencies":[],"contractKind":"library","documentation":"@title Eliptic curve signature operations\n@dev Based on https://gist.github.com/axic/5b33912c6f61ae6fd96d6c4a47afde6d\nTODO Remove this library once solidity supports passing a signature to ecrecover.\nSee https://github.com/ethereum/solidity/issues/864","fullyImplemented":true,"id":18177,"linearizedBaseContracts":[18177],"name":"ECRecovery","nodeType":"ContractDefinition","nodes":[{"body":{"id":18159,"nodeType":"Block","src":"686:844:46","statements":[{"assignments":[],"declarations":[{"constant":false,"id":18108,"name":"r","nodeType":"VariableDeclaration","scope":18160,"src":"692:9:46","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":18107,"name":"bytes32","nodeType":"ElementaryTypeName","src":"692:7:46","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"}],"id":18109,"initialValue":null,"nodeType":"VariableDeclarationStatement","src":"692:9:46"},{"assignments":[],"declarations":[{"constant":false,"id":18111,"name":"s","nodeType":"VariableDeclaration","scope":18160,"src":"707:9:46","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":18110,"name":"bytes32","nodeType":"ElementaryTypeName","src":"707:7:46","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"}],"id":18112,"initialValue":null,"nodeType":"VariableDeclarationStatement","src":"707:9:46"},{"assignments":[],"declarations":[{"constant":false,"id":18114,"name":"v","nodeType":"VariableDeclaration","scope":18160,"src":"722:7:46","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"},"typeName":{"id":18113,"name":"uint8","nodeType":"ElementaryTypeName","src":"722:5:46","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"value":null,"visibility":"internal"}],"id":18115,"initialValue":null,"nodeType":"VariableDeclarationStatement","src":"722:7:46"},{"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":18119,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"expression":{"argumentTypes":null,"id":18116,"name":"sig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":18102,"src":"774:3:46","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}},"id":18117,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"length","nodeType":"MemberAccess","referencedDeclaration":null,"src":"774:10:46","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"argumentTypes":null,"hexValue":"3635","id":18118,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"788:2:46","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_65_by_1","typeString":"int_const 65"},"value":"65"},"src":"774:16:46","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":null,"id":18126,"nodeType":"IfStatement","src":"770:56:46","trueBody":{"id":18125,"nodeType":"Block","src":"792:34:46","statements":[{"expression":{"argumentTypes":null,"components":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":18121,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"816:1:46","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":18120,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"808:7:46","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":"address"},"id":18122,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"808:10:46","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"id":18123,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"TupleExpression","src":"807:12:46","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"functionReturnParameters":18106,"id":18124,"nodeType":"Return","src":"800:19:46"}]}},{"externalReferences":[{"r":{"declaration":18108,"isOffset":false,"isSlot":false,"src":"1076:1:46","valueSize":1}},{"v":{"declaration":18114,"isOffset":false,"isSlot":false,"src":"1138:1:46","valueSize":1}},{"sig":{"declaration":18102,"isOffset":false,"isSlot":false,"src":"1091:3:46","valueSize":1}},{"s":{"declaration":18111,"isOffset":false,"isSlot":false,"src":"1107:1:46","valueSize":1}},{"sig":{"declaration":18102,"isOffset":false,"isSlot":false,"src":"1122:3:46","valueSize":1}},{"sig":{"declaration":18102,"isOffset":false,"isSlot":false,"src":"1161:3:46","valueSize":1}}],"id":18127,"nodeType":"InlineAssembly","operations":"{\n    r := mload(add(sig, 32))\n    s := mload(add(sig, 64))\n    v := byte(0, mload(add(sig, 96)))\n}","src":"1059:213:46"},{"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint8","typeString":"uint8"},"id":18130,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":18128,"name":"v","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":18114,"src":"1274:1:46","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"argumentTypes":null,"hexValue":"3237","id":18129,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1278:2:46","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_27_by_1","typeString":"int_const 27"},"value":"27"},"src":"1274:6:46","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":null,"id":18136,"nodeType":"IfStatement","src":"1270:34:46","trueBody":{"id":18135,"nodeType":"Block","src":"1282:22:46","statements":[{"expression":{"argumentTypes":null,"id":18133,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":18131,"name":"v","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":18114,"src":"1290:1:46","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"argumentTypes":null,"hexValue":"3237","id":18132,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1295:2:46","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_27_by_1","typeString":"int_const 27"},"value":"27"},"src":"1290:7:46","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"id":18134,"nodeType":"ExpressionStatement","src":"1290:7:46"}]}},{"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":18143,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint8","typeString":"uint8"},"id":18139,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":18137,"name":"v","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":18114,"src":"1373:1:46","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"argumentTypes":null,"hexValue":"3237","id":18138,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1378:2:46","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_27_by_1","typeString":"int_const 27"},"value":"27"},"src":"1373:7:46","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"&&","rightExpression":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint8","typeString":"uint8"},"id":18142,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":18140,"name":"v","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":18114,"src":"1384:1:46","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"argumentTypes":null,"hexValue":"3238","id":18141,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1389:2:46","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_28_by_1","typeString":"int_const 28"},"value":"28"},"src":"1384:7:46","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"1373:18:46","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":18157,"nodeType":"Block","src":"1433:93:46","statements":[{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":18151,"name":"hash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":18100,"src":"1505:4:46","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},{"argumentTypes":null,"id":18152,"name":"v","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":18114,"src":"1511:1:46","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},{"argumentTypes":null,"id":18153,"name":"r","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":18108,"src":"1514:1:46","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},{"argumentTypes":null,"id":18154,"name":"s","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":18111,"src":"1517:1:46","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"},{"typeIdentifier":"t_uint8","typeString":"uint8"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"id":18150,"name":"ecrecover","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":18991,"src":"1495:9:46","typeDescriptions":{"typeIdentifier":"t_function_ecrecover_pure$_t_bytes32_$_t_uint8_$_t_bytes32_$_t_bytes32_$returns$_t_address_$","typeString":"function (bytes32,uint8,bytes32,bytes32) pure returns (address)"}},"id":18155,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1495:24:46","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"functionReturnParameters":18106,"id":18156,"nodeType":"Return","src":"1488:31:46"}]},"id":18158,"nodeType":"IfStatement","src":"1369:157:46","trueBody":{"id":18149,"nodeType":"Block","src":"1393:34:46","statements":[{"expression":{"argumentTypes":null,"components":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":18145,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1417:1:46","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":18144,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"1409:7:46","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":"address"},"id":18146,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1409:10:46","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"id":18147,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"TupleExpression","src":"1408:12:46","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"functionReturnParameters":18106,"id":18148,"nodeType":"Return","src":"1401:19:46"}]}}]},"documentation":"@dev Recover signer address from a message by using their signature\n@param hash bytes32 message, the hash is the signed message. What is recovered is the signer address.\n@param sig bytes signature, the signature is generated using web3.eth.sign()","id":18160,"implemented":true,"isConstructor":false,"isDeclaredConst":true,"modifiers":[],"name":"recover","nodeType":"FunctionDefinition","parameters":{"id":18103,"nodeType":"ParameterList","parameters":[{"constant":false,"id":18100,"name":"hash","nodeType":"VariableDeclaration","scope":18160,"src":"615:12:46","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":18099,"name":"bytes32","nodeType":"ElementaryTypeName","src":"615:7:46","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"},{"constant":false,"id":18102,"name":"sig","nodeType":"VariableDeclaration","scope":18160,"src":"629:9:46","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes"},"typeName":{"id":18101,"name":"bytes","nodeType":"ElementaryTypeName","src":"629:5:46","typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes"}},"value":null,"visibility":"internal"}],"src":"614:25:46"},"payable":false,"returnParameters":{"id":18106,"nodeType":"ParameterList","parameters":[{"constant":false,"id":18105,"name":"","nodeType":"VariableDeclaration","scope":18160,"src":"675:7:46","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":18104,"name":"address","nodeType":"ElementaryTypeName","src":"675:7:46","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"}],"src":"674:9:46"},"scope":18177,"src":"598:932:46","stateMutability":"pure","superFunction":null,"visibility":"internal"},{"body":{"id":18175,"nodeType":"Block","src":"1760:185:46","statements":[{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"19457468657265756d205369676e6564204d6573736167653a0a3332","id":18170,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"1893:34:46","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_178a2411ab6fbc1ba11064408972259c558d0e82fd48b0aba3ad81d14f065e73","typeString":"literal_string \"\u0019Ethereum Signed Message:\n32\""},"value":"\u0019Ethereum Signed Message:\n32"},{"argumentTypes":null,"id":18171,"name":"hash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":18162,"src":"1929:4:46","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_stringliteral_178a2411ab6fbc1ba11064408972259c558d0e82fd48b0aba3ad81d14f065e73","typeString":"literal_string \"\u0019Ethereum Signed Message:\n32\""},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"expression":{"argumentTypes":null,"id":18168,"name":"abi","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":18986,"src":"1876:3:46","typeDescriptions":{"typeIdentifier":"t_magic_abi","typeString":"abi"}},"id":18169,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberName":"encodePacked","nodeType":"MemberAccess","referencedDeclaration":null,"src":"1876:16:46","typeDescriptions":{"typeIdentifier":"t_function_abiencodepacked_pure$__$returns$_t_bytes_memory_ptr_$","typeString":"function () pure returns (bytes memory)"}},"id":18172,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1876:58:46","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}],"id":18167,"name":"keccak256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":18993,"src":"1859:9:46","typeDescriptions":{"typeIdentifier":"t_function_sha3_pure$__$returns$_t_bytes32_$","typeString":"function () pure returns (bytes32)"}},"id":18173,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1859:81:46","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"functionReturnParameters":18166,"id":18174,"nodeType":"Return","src":"1852:88:46"}]},"documentation":"toEthSignedMessageHash\n@dev prefix a bytes32 value with \"\\x19Ethereum Signed Message:\"\nand hash the result","id":18176,"implemented":true,"isConstructor":false,"isDeclaredConst":true,"modifiers":[],"name":"toEthSignedMessageHash","nodeType":"FunctionDefinition","parameters":{"id":18163,"nodeType":"ParameterList","parameters":[{"constant":false,"id":18162,"name":"hash","nodeType":"VariableDeclaration","scope":18176,"src":"1700:12:46","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":18161,"name":"bytes32","nodeType":"ElementaryTypeName","src":"1700:7:46","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"}],"src":"1699:14:46"},"payable":false,"returnParameters":{"id":18166,"nodeType":"ParameterList","parameters":[{"constant":false,"id":18165,"name":"","nodeType":"VariableDeclaration","scope":18176,"src":"1749:7:46","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":18164,"name":"bytes32","nodeType":"ElementaryTypeName","src":"1749:7:46","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"}],"src":"1748:9:46"},"scope":18177,"src":"1668:277:46","stateMutability":"pure","superFunction":null,"visibility":"internal"}],"scope":18178,"src":"300:1647:46"}],"src":"0:1948:46"},"legacyAST":{"absolutePath":"openzeppelin-solidity/contracts/ECRecovery.sol","exportedSymbols":{"ECRecovery":[18177]},"id":18178,"nodeType":"SourceUnit","nodes":[{"id":18098,"literals":["solidity","^","0.4",".24"],"nodeType":"PragmaDirective","src":"0:24:46"},{"baseContracts":[],"contractDependencies":[],"contractKind":"library","documentation":"@title Eliptic curve signature operations\n@dev Based on https://gist.github.com/axic/5b33912c6f61ae6fd96d6c4a47afde6d\nTODO Remove this library once solidity supports passing a signature to ecrecover.\nSee https://github.com/ethereum/solidity/issues/864","fullyImplemented":true,"id":18177,"linearizedBaseContracts":[18177],"name":"ECRecovery","nodeType":"ContractDefinition","nodes":[{"body":{"id":18159,"nodeType":"Block","src":"686:844:46","statements":[{"assignments":[],"declarations":[{"constant":false,"id":18108,"name":"r","nodeType":"VariableDeclaration","scope":18160,"src":"692:9:46","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":18107,"name":"bytes32","nodeType":"ElementaryTypeName","src":"692:7:46","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"}],"id":18109,"initialValue":null,"nodeType":"VariableDeclarationStatement","src":"692:9:46"},{"assignments":[],"declarations":[{"constant":false,"id":18111,"name":"s","nodeType":"VariableDeclaration","scope":18160,"src":"707:9:46","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":18110,"name":"bytes32","nodeType":"ElementaryTypeName","src":"707:7:46","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"}],"id":18112,"initialValue":null,"nodeType":"VariableDeclarationStatement","src":"707:9:46"},{"assignments":[],"declarations":[{"constant":false,"id":18114,"name":"v","nodeType":"VariableDeclaration","scope":18160,"src":"722:7:46","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"},"typeName":{"id":18113,"name":"uint8","nodeType":"ElementaryTypeName","src":"722:5:46","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"value":null,"visibility":"internal"}],"id":18115,"initialValue":null,"nodeType":"VariableDeclarationStatement","src":"722:7:46"},{"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":18119,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"expression":{"argumentTypes":null,"id":18116,"name":"sig","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":18102,"src":"774:3:46","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}},"id":18117,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"length","nodeType":"MemberAccess","referencedDeclaration":null,"src":"774:10:46","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"argumentTypes":null,"hexValue":"3635","id":18118,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"788:2:46","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_65_by_1","typeString":"int_const 65"},"value":"65"},"src":"774:16:46","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":null,"id":18126,"nodeType":"IfStatement","src":"770:56:46","trueBody":{"id":18125,"nodeType":"Block","src":"792:34:46","statements":[{"expression":{"argumentTypes":null,"components":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":18121,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"816:1:46","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":18120,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"808:7:46","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":"address"},"id":18122,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"808:10:46","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"id":18123,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"TupleExpression","src":"807:12:46","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"functionReturnParameters":18106,"id":18124,"nodeType":"Return","src":"800:19:46"}]}},{"externalReferences":[{"r":{"declaration":18108,"isOffset":false,"isSlot":false,"src":"1076:1:46","valueSize":1}},{"v":{"declaration":18114,"isOffset":false,"isSlot":false,"src":"1138:1:46","valueSize":1}},{"sig":{"declaration":18102,"isOffset":false,"isSlot":false,"src":"1091:3:46","valueSize":1}},{"s":{"declaration":18111,"isOffset":false,"isSlot":false,"src":"1107:1:46","valueSize":1}},{"sig":{"declaration":18102,"isOffset":false,"isSlot":false,"src":"1122:3:46","valueSize":1}},{"sig":{"declaration":18102,"isOffset":false,"isSlot":false,"src":"1161:3:46","valueSize":1}}],"id":18127,"nodeType":"InlineAssembly","operations":"{\n    r := mload(add(sig, 32))\n    s := mload(add(sig, 64))\n    v := byte(0, mload(add(sig, 96)))\n}","src":"1059:213:46"},{"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint8","typeString":"uint8"},"id":18130,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":18128,"name":"v","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":18114,"src":"1274:1:46","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"argumentTypes":null,"hexValue":"3237","id":18129,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1278:2:46","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_27_by_1","typeString":"int_const 27"},"value":"27"},"src":"1274:6:46","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":null,"id":18136,"nodeType":"IfStatement","src":"1270:34:46","trueBody":{"id":18135,"nodeType":"Block","src":"1282:22:46","statements":[{"expression":{"argumentTypes":null,"id":18133,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":18131,"name":"v","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":18114,"src":"1290:1:46","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"argumentTypes":null,"hexValue":"3237","id":18132,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1295:2:46","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_27_by_1","typeString":"int_const 27"},"value":"27"},"src":"1290:7:46","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"id":18134,"nodeType":"ExpressionStatement","src":"1290:7:46"}]}},{"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":18143,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint8","typeString":"uint8"},"id":18139,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":18137,"name":"v","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":18114,"src":"1373:1:46","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"argumentTypes":null,"hexValue":"3237","id":18138,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1378:2:46","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_27_by_1","typeString":"int_const 27"},"value":"27"},"src":"1373:7:46","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"&&","rightExpression":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint8","typeString":"uint8"},"id":18142,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":18140,"name":"v","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":18114,"src":"1384:1:46","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"argumentTypes":null,"hexValue":"3238","id":18141,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1389:2:46","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_28_by_1","typeString":"int_const 28"},"value":"28"},"src":"1384:7:46","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"1373:18:46","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":18157,"nodeType":"Block","src":"1433:93:46","statements":[{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":18151,"name":"hash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":18100,"src":"1505:4:46","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},{"argumentTypes":null,"id":18152,"name":"v","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":18114,"src":"1511:1:46","typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},{"argumentTypes":null,"id":18153,"name":"r","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":18108,"src":"1514:1:46","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},{"argumentTypes":null,"id":18154,"name":"s","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":18111,"src":"1517:1:46","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"},{"typeIdentifier":"t_uint8","typeString":"uint8"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"id":18150,"name":"ecrecover","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":18991,"src":"1495:9:46","typeDescriptions":{"typeIdentifier":"t_function_ecrecover_pure$_t_bytes32_$_t_uint8_$_t_bytes32_$_t_bytes32_$returns$_t_address_$","typeString":"function (bytes32,uint8,bytes32,bytes32) pure returns (address)"}},"id":18155,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1495:24:46","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"functionReturnParameters":18106,"id":18156,"nodeType":"Return","src":"1488:31:46"}]},"id":18158,"nodeType":"IfStatement","src":"1369:157:46","trueBody":{"id":18149,"nodeType":"Block","src":"1393:34:46","statements":[{"expression":{"argumentTypes":null,"components":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":18145,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1417:1:46","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":18144,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"1409:7:46","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":"address"},"id":18146,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1409:10:46","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"id":18147,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"TupleExpression","src":"1408:12:46","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"functionReturnParameters":18106,"id":18148,"nodeType":"Return","src":"1401:19:46"}]}}]},"documentation":"@dev Recover signer address from a message by using their signature\n@param hash bytes32 message, the hash is the signed message. What is recovered is the signer address.\n@param sig bytes signature, the signature is generated using web3.eth.sign()","id":18160,"implemented":true,"isConstructor":false,"isDeclaredConst":true,"modifiers":[],"name":"recover","nodeType":"FunctionDefinition","parameters":{"id":18103,"nodeType":"ParameterList","parameters":[{"constant":false,"id":18100,"name":"hash","nodeType":"VariableDeclaration","scope":18160,"src":"615:12:46","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":18099,"name":"bytes32","nodeType":"ElementaryTypeName","src":"615:7:46","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"},{"constant":false,"id":18102,"name":"sig","nodeType":"VariableDeclaration","scope":18160,"src":"629:9:46","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes"},"typeName":{"id":18101,"name":"bytes","nodeType":"ElementaryTypeName","src":"629:5:46","typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes"}},"value":null,"visibility":"internal"}],"src":"614:25:46"},"payable":false,"returnParameters":{"id":18106,"nodeType":"ParameterList","parameters":[{"constant":false,"id":18105,"name":"","nodeType":"VariableDeclaration","scope":18160,"src":"675:7:46","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":18104,"name":"address","nodeType":"ElementaryTypeName","src":"675:7:46","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"}],"src":"674:9:46"},"scope":18177,"src":"598:932:46","stateMutability":"pure","superFunction":null,"visibility":"internal"},{"body":{"id":18175,"nodeType":"Block","src":"1760:185:46","statements":[{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"19457468657265756d205369676e6564204d6573736167653a0a3332","id":18170,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"1893:34:46","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_178a2411ab6fbc1ba11064408972259c558d0e82fd48b0aba3ad81d14f065e73","typeString":"literal_string \"\u0019Ethereum Signed Message:\n32\""},"value":"\u0019Ethereum Signed Message:\n32"},{"argumentTypes":null,"id":18171,"name":"hash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":18162,"src":"1929:4:46","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_stringliteral_178a2411ab6fbc1ba11064408972259c558d0e82fd48b0aba3ad81d14f065e73","typeString":"literal_string \"\u0019Ethereum Signed Message:\n32\""},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"expression":{"argumentTypes":null,"id":18168,"name":"abi","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":18986,"src":"1876:3:46","typeDescriptions":{"typeIdentifier":"t_magic_abi","typeString":"abi"}},"id":18169,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberName":"encodePacked","nodeType":"MemberAccess","referencedDeclaration":null,"src":"1876:16:46","typeDescriptions":{"typeIdentifier":"t_function_abiencodepacked_pure$__$returns$_t_bytes_memory_ptr_$","typeString":"function () pure returns (bytes memory)"}},"id":18172,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1876:58:46","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}],"id":18167,"name":"keccak256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":18993,"src":"1859:9:46","typeDescriptions":{"typeIdentifier":"t_function_sha3_pure$__$returns$_t_bytes32_$","typeString":"function () pure returns (bytes32)"}},"id":18173,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1859:81:46","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"functionReturnParameters":18166,"id":18174,"nodeType":"Return","src":"1852:88:46"}]},"documentation":"toEthSignedMessageHash\n@dev prefix a bytes32 value with \"\\x19Ethereum Signed Message:\"\nand hash the result","id":18176,"implemented":true,"isConstructor":false,"isDeclaredConst":true,"modifiers":[],"name":"toEthSignedMessageHash","nodeType":"FunctionDefinition","parameters":{"id":18163,"nodeType":"ParameterList","parameters":[{"constant":false,"id":18162,"name":"hash","nodeType":"VariableDeclaration","scope":18176,"src":"1700:12:46","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":18161,"name":"bytes32","nodeType":"ElementaryTypeName","src":"1700:7:46","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"}],"src":"1699:14:46"},"payable":false,"returnParameters":{"id":18166,"nodeType":"ParameterList","parameters":[{"constant":false,"id":18165,"name":"","nodeType":"VariableDeclaration","scope":18176,"src":"1749:7:46","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":18164,"name":"bytes32","nodeType":"ElementaryTypeName","src":"1749:7:46","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"}],"src":"1748:9:46"},"scope":18177,"src":"1668:277:46","stateMutability":"pure","superFunction":null,"visibility":"internal"}],"scope":18178,"src":"300:1647:46"}],"src":"0:1948:46"},"compiler":{"name":"solc","version":"0.4.24+commit.e67f0147.Emscripten.clang"},"networks":{},"schemaVersion":"2.0.1","updatedAt":"2018-08-20T08:30:24.337Z"}