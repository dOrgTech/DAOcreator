{"contractName":"ReputationFromToken","abi":[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_beneficiary","type":"address"},{"indexed":true,"internalType":"address","name":"_sender","type":"address"},{"indexed":false,"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"Redeem","type":"event"},{"constant":true,"inputs":[],"name":"DELEGATION_HASH_EIP712","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"avatar","outputs":[{"internalType":"contract Avatar","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"curve","outputs":[{"internalType":"contract CurveInterface","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getAgreementHash","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"redeems","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"tokenContract","outputs":[{"internalType":"contract IERC20","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"contract Avatar","name":"_avatar","type":"address"},{"internalType":"contract IERC20","name":"_tokenContract","type":"address"},{"internalType":"contract CurveInterface","name":"_curve","type":"address"},{"internalType":"bytes32","name":"_agreementHash","type":"bytes32"}],"name":"initialize","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"_beneficiary","type":"address"},{"internalType":"bytes32","name":"_agreementHash","type":"bytes32"}],"name":"redeem","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"_beneficiary","type":"address"},{"internalType":"bytes32","name":"_agreementHash","type":"bytes32"},{"internalType":"uint256","name":"_signatureType","type":"uint256"},{"internalType":"bytes","name":"_signature","type":"bytes"}],"name":"redeemWithSignature","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function"}],"metadata":"{\"compiler\":{\"version\":\"0.5.13+commit.5b0b510c\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_beneficiary\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_sender\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"Redeem\",\"type\":\"event\"},{\"constant\":true,\"inputs\":[],\"name\":\"DELEGATION_HASH_EIP712\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"avatar\",\"outputs\":[{\"internalType\":\"contract Avatar\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"curve\",\"outputs\":[{\"internalType\":\"contract CurveInterface\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getAgreementHash\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"contract Avatar\",\"name\":\"_avatar\",\"type\":\"address\"},{\"internalType\":\"contract IERC20\",\"name\":\"_tokenContract\",\"type\":\"address\"},{\"internalType\":\"contract CurveInterface\",\"name\":\"_curve\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"_agreementHash\",\"type\":\"bytes32\"}],\"name\":\"initialize\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"_beneficiary\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"_agreementHash\",\"type\":\"bytes32\"}],\"name\":\"redeem\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"_beneficiary\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"_agreementHash\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"_signatureType\",\"type\":\"uint256\"},{\"internalType\":\"bytes\",\"name\":\"_signature\",\"type\":\"bytes\"}],\"name\":\"redeemWithSignature\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"redeems\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"tokenContract\",\"outputs\":[{\"internalType\":\"contract IERC20\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"methods\":{\"getAgreementHash()\":{\"details\":\"getAgreementHash\",\"return\":\"bytes32 agreementHash\"},\"initialize(address,address,address,bytes32)\":{\"details\":\"initialize\",\"params\":{\"_agreementHash\":\"is a hash of agreement required to be added to the TX by participants\",\"_avatar\":\"the avatar to mint reputation from\",\"_tokenContract\":\"the token contract\"}},\"redeem(address,bytes32)\":{\"details\":\"redeem function\",\"params\":{\"_agreementHash\":\"the agreementHash hash\",\"_beneficiary\":\"the beneficiary address to redeem for\"},\"return\":\"uint256 minted reputation\"},\"redeemWithSignature(address,bytes32,uint256,bytes)\":{\"details\":\"redeemWithSignature function\",\"params\":{\"_beneficiary\":\"the beneficiary address to redeem for\",\"_signature\":\"- signed data by the staker\",\"_signatureType\":\"signature type 1 - for web3.eth.sign 2 - for eth_signTypedData according to EIP #712.\"},\"return\":\"uint256 minted reputation\"}},\"title\":\"A scheme for reputation allocation according to token balances       This contract is assuming that the token contract is paused, and one cannot transfer its tokens.\"},\"userdoc\":{\"methods\":{}}},\"settings\":{\"compilationTarget\":{\"/Users/oren/daostack/arc/contracts/schemes/ReputationFromToken.sol\":\"ReputationFromToken\"},\"evmVersion\":\"petersburg\",\"libraries\":{},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[]},\"sources\":{\"/Users/oren/daostack/arc/contracts/controller/Avatar.sol\":{\"keccak256\":\"0xdc75e96aca5c6aeaa3bbf97d2a3a1d305c1c168b74f1d5a6b151648e1b71086f\",\"urls\":[\"bzz-raw://425e5a7e0d27fe14af052e826a1757135afc30cf6941986dcd2c336e34c5d24c\",\"dweb:/ipfs/QmR9Jn4ZNx8LNyzSRWhdNh7rG8pccSHLX3iqdSk26VYw3R\"]},\"/Users/oren/daostack/arc/contracts/controller/Controller.sol\":{\"keccak256\":\"0x88fe5ca7618e1ed502a9665e53bfab5260282a9a7b561361ee8067af59a58f5a\",\"urls\":[\"bzz-raw://911676f75c5f83d54a7c892bb8dd39daa7b199c358536e7347ca150e815759bc\",\"dweb:/ipfs/QmT8TtonKcEgjrok8b3zUkGZQL6FEZCXFdkYMc5jV61bD6\"]},\"/Users/oren/daostack/arc/contracts/controller/DAOToken.sol\":{\"keccak256\":\"0x567235b3ec3884704725a775559a2c60b46c56d144072929035dbadeeb65e884\",\"urls\":[\"bzz-raw://8944f3ffa3f1fbc1aa6bfddf5f055a15bec79f51dcca655d5a8698aa9dfd38d4\",\"dweb:/ipfs/QmUZWJVgaXkMVMGiXAHkiETCHGptt6wCRLUiaGrzxk7Lv4\"]},\"/Users/oren/daostack/arc/contracts/globalConstraints/GlobalConstraintInterface.sol\":{\"keccak256\":\"0x83fb7666df1270aa8d857a631172b555dcf4f24fabba9a2a241d2b1ca2e574ef\",\"urls\":[\"bzz-raw://2499d07b8ba63936601c61884415a5f6848f1883e452efb608ccb181d98125e8\",\"dweb:/ipfs/QmeZCTMZ6KwJX1HLRZMMTZugskPDR6dvaNGEknEyyBePxt\"]},\"/Users/oren/daostack/arc/contracts/libs/SafeERC20.sol\":{\"keccak256\":\"0x1e91e541a9e835c05372a53eb7879e05bc47f6355602d6d3bf4bbdd8f660fc95\",\"urls\":[\"bzz-raw://ba9d1c3e68e38adc57e3097d191e7328816839ca918aff208338fb447b0792d8\",\"dweb:/ipfs/QmWisfDaqBSoYjg2U93VsZL43Lba4Ko7mbe6YS2wZpgvDR\"]},\"/Users/oren/daostack/arc/contracts/schemes/Agreement.sol\":{\"keccak256\":\"0xd2e8e2b9fb421c823706a18c929b353115427a9ad5f2b6b355f9e89fb60473d0\",\"urls\":[\"bzz-raw://8c6f10c918a96a58a2dde4137127d9891b48d5d637f567fb374e6dee6a2a9b38\",\"dweb:/ipfs/QmTKPKkHEXU2sNbU5hH4prP8GwqZ1GhJk1H9zkayRcowvq\"]},\"/Users/oren/daostack/arc/contracts/schemes/CurveInterface.sol\":{\"keccak256\":\"0x4e67086c005d04579132bf539abcf0f698a9db496a3478ce9cda6c54a379ee4c\",\"urls\":[\"bzz-raw://514910f66b7de63fa2d556211ce91550e0ab3337c8010a5b5a5e2598243a2107\",\"dweb:/ipfs/QmYycJYmPLrh5r3Uv65pACXM3Z28jSSKESFCfFqALdBi3j\"]},\"/Users/oren/daostack/arc/contracts/schemes/ReputationFromToken.sol\":{\"keccak256\":\"0xe2ad3b879e2754e4f8caccf64e6288d6f602e36504c1c58fce058bbec60ebdc3\",\"urls\":[\"bzz-raw://e1b1cc5079efaf8e140f19f78bb08fb07b06347fa7d9a25dbf965a0e1ae2e399\",\"dweb:/ipfs/QmQPf6o9xUEhSSL3EQG7EfM9qBJdTwNeXhi21ebs2xhcbL\"]},\"@daostack/infra/contracts/Reputation.sol\":{\"keccak256\":\"0xec21bc058552cae458e68fa91aad7219d11be2bc9710183696d828065f03d6ea\",\"urls\":[\"bzz-raw://a3262e0088c924072428cfe69d78c06e93cec3caeee410af8ab36eee2c8f8d66\",\"dweb:/ipfs/QmNhcQd2pxWXYJrMz8kVsZUfFVYUSgKjZCUcFseyBSjZiq\"]},\"openzeppelin-solidity/contracts/GSN/Context.sol\":{\"keccak256\":\"0x90a3995645af7562d84b9d69363ffa5ae7217714ab61e951bf7bc450f40e4061\",\"urls\":[\"bzz-raw://216ef9d6b614db4eb46970b4e84903f2534a45572dd30a79f0041f1a5830f436\",\"dweb:/ipfs/QmNPrJ4MWKUAWzKXpUqeyKRUfosaoANZAqXgvepdrCwZAG\"]},\"openzeppelin-solidity/contracts/cryptography/ECDSA.sol\":{\"keccak256\":\"0xc89ea7e48ba477b1781b24ae963442fff1bb2af33b6178dad679a3fa2f5ab2de\",\"urls\":[\"bzz-raw://b736ddad8143f8f1cd13c20809d4ebce5f5a8c7725081b0b703294078bd506d1\",\"dweb:/ipfs/QmdhTWCXFCuwG9JaPMjwnhkQoDj9su8R7KMPNvD5z9KeWD\"]},\"openzeppelin-solidity/contracts/math/SafeMath.sol\":{\"keccak256\":\"0x640b6dee7a4b830bdfd52b5031a07fc2b12209f5b2e29e5d364a7d37f69d8076\",\"urls\":[\"bzz-raw://31113152e1ddb78fe7a4197f247591ca894e93f916867beb708d8e747b6cc74f\",\"dweb:/ipfs/QmbZaJyXdpsYGykVhHH9qpVGQg9DGCxE2QufbCUy3daTgq\"]},\"openzeppelin-solidity/contracts/ownership/Ownable.sol\":{\"keccak256\":\"0xecd8ab29d9a5771c3964d0cd1788c4a5098a0081b20fb275da850a22b1c59806\",\"urls\":[\"bzz-raw://696a75bc2c55407ce8251ccc7d19ecb1b7b2be1796a160a6524312babcc7e3d4\",\"dweb:/ipfs/QmQViKEp3y99h9uhRssE29TmjBKRnFMaoz3eJZ4eggggg2\"]},\"openzeppelin-solidity/contracts/token/ERC20/ERC20.sol\":{\"keccak256\":\"0x65a4078c03875c25413a068ce9cfdd7e68a90f8786612d1189c89341e6e3b802\",\"urls\":[\"bzz-raw://45c0d95495b944fbb1aa09d900b0ab530903a432125ab8fddfa05064a7988991\",\"dweb:/ipfs/Qma2VeknkKA1THeubGzshWFk44BktXkXP1UKp9Un2uDSsu\"]},\"openzeppelin-solidity/contracts/token/ERC20/ERC20Burnable.sol\":{\"keccak256\":\"0x9b94356691f3cbf90a5d83ae3fdf6a5a662bb004d2bd8b034160d60221807e64\",\"urls\":[\"bzz-raw://14a9d33db455302b8bb9fdb28998efefbe5a1cb41b29e31391609f646b2ab351\",\"dweb:/ipfs/Qmd4wFr6GEMZnnxgXeq3gmp7cs8tqDuHp3TVNhCbjnux2V\"]},\"openzeppelin-solidity/contracts/token/ERC20/IERC20.sol\":{\"keccak256\":\"0xe5bb0f57cff3e299f360052ba50f1ea0fff046df2be070b6943e0e3c3fdad8a9\",\"urls\":[\"bzz-raw://59fd025151435da35faa8093a5c7a17de02de9d08ad27275c5cdf05050820d91\",\"dweb:/ipfs/QmQMvwEcPhoRXzbXyrdoeRtvLoifUW9Qh7Luho7bmUPRkc\"]},\"openzeppelin-solidity/contracts/utils/Address.sol\":{\"keccak256\":\"0x70df50e240407aa50915ad14f61b1a901fa335b37de20955b99ed647be756af0\",\"urls\":[\"bzz-raw://9404711f3206610c08ea97fa52c7b6b4d2e9d536e96fc4b7210aa7e24f796c36\",\"dweb:/ipfs/QmZDzpVzjoap13SuPEq5pVCrmdjoKVZnTsQPLKXAbynTTW\"]}},\"version\":1}","sourceMap":"501:4291:22:-;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;501:4291:22;;;;;;;","deployedSourceMap":"501:4291:22:-;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;501:4291:22;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;903:184;;;:::i;:::-;;;;;;;;;;;;;;;;709:43;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;709:43:22;-1:-1:-1;;;;;709:43:22;;:::i;:::-;;;;;;;;;;;;;;;;;;611:27;;;:::i;:::-;;;;-1:-1:-1;;;;;611:27:22;;;;;;;;;;;;;;2560:1164;;;;;;13:3:-1;8;5:12;2:2;;;30:1;27;20:12;2:2;-1:-1;;;;;2560:1164:22;;;;;;;;;;;;;;;;;;;;;;;;;21:11:-1;5:28;;2:2;;;46:1;43;36:12;2:2;2560:1164:22;;35:9:-1;28:4;12:14;8:25;5:40;2:2;;;58:1;55;48:12;2:2;2560:1164:22;;;;;;100:9:-1;95:1;81:12;77:20;67:8;63:35;60:50;39:11;25:12;22:29;11:107;8:2;;;131:1;128;121:12;8:2;-1:-1;2560:1164:22;;-1:-1:-1;2560:1164:22;-1:-1:-1;2560:1164:22;:::i;758:20::-;;;:::i;1428:397::-;;;;;;13:3:-1;8;5:12;2:2;;;30:1;27;20:12;2:2;-1:-1;;;;;;1428:397:22;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;407:101:7;;;:::i;644:27:22:-;;;:::i;2033:161::-;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;;;;;;2033:161:22;;;;;;;;:::i;903:184::-;966:120;;;;;;;;;-1:-1:-1;;;966:120:22;;;;-1:-1:-1;;;966:120:22;;;;;;;22:32:-1;26:21;;;22:32;6:49;;966:120:22;;;;;;956:131;;49:4:-1;956:131:22;;;;;-1:-1:-1;903:184:22;:::o;709:43::-;;;;;;;;;;;;;;;:::o;611:27::-;;;-1:-1:-1;;;;;611:27:22;;:::o;2560:1164::-;2761:7;2835:24;2873:14;2891:1;2873:19;2869:647;;;966:120;;;;;;;;;-1:-1:-1;;;966:120:22;;;;-1:-1:-1;;;966:120:22;;;;;;;26:21:-1;;;22:32;;6:49;;966:120:22;;;;;956:131;;49:4:-1;956:131:22;;;;3101:4;3051:134;;;;;;;;;;;-1:-1:-1;;3051:134:22;;;;;;;;;;;;;;26:21:-1;;;22:32;;;6:49;;3051:134:22;;;;;3016:191;;;;;;2954:271;;;;;;;;;;;;;;;;;26:21:-1;;;22:32;;;6:49;;2954:271:22;;;;;;;2927:312;;;;;;-1:-1:-1;2869:647:22;;-1:-1:-1;2869:647:22;;3289:216;3374:4;3405:12;3443:14;3324:134;;;;;;-1:-1:-1;;;;;3324:134:22;-1:-1:-1;;;;;3324:134:22;;;;;;;;-1:-1:-1;;;;;3324:134:22;-1:-1:-1;;;;;3324:134:22;;;;;;;;;;;;;;;;;;;49:4:-1;39:7;30;26:21;22:32;13:7;6:49;3324:134:22;;;3289:191;;;;;;:214;:216::i;:::-;3270:235;;2869:647;3525:16;3544:36;3569:10;;3544:36;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;30:3:-1;22:6;14;1:33;99:1;81:16;;74:27;;;;-1:-1;3544:16:22;;:36;-1:-1:-1;;3544:36:22;:24;:36;;-1:-1:-1;3544:36:22:i;:::-;3525:55;-1:-1:-1;;;;;;3598:22:22;;3590:63;;;;;-1:-1:-1;;;3590:63:22;;;;;;;;;;;;;;;;;;;;;;;;;;;;3670:47;3678:12;3692:8;3702:14;3670:7;:47::i;:::-;3663:54;2560:1164;-1:-1:-1;;;;;;;;2560:1164:22:o;758:20::-;;;-1:-1:-1;;;;;758:20:22;;:::o;1428:397::-;1565:6;;-1:-1:-1;;;;;1565:6:22;:19;1557:59;;;;;-1:-1:-1;;;1557:59:22;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;1634:20:22;;1626:54;;;;;-1:-1:-1;;;1626:54:22;;;;;;;;;;;;-1:-1:-1;;;1626:54:22;;;;;;;;;;;;;;;1690:13;:30;;-1:-1:-1;;;;;1690:30:22;;;-1:-1:-1;;;;;;1690:30:22;;;;;;;1730:6;:16;;;;;;;;;;;1756:5;:14;;;;;;;;;;;;;;;1780:38;1803:14;1780:22;:38::i;:::-;1428:397;;;;:::o;407:101:7:-;458:7;488:13;407:101;:::o;644:27:22:-;;;-1:-1:-1;;;;;644:27:22;;:::o;2033:161::-;2112:7;2138:49;2146:12;2160:10;2172:14;2138:7;:49::i;:::-;2131:56;;2033:161;;;;;:::o;3381:265:64:-;3580:58;;;;;;;;;;;;;;;;;;;;;;26:21:-1;;;22:32;;;6:49;;3580:58:64;;;;;;;3570:69;;;;;;3381:265::o;1226:1891::-;1304:7;1365:9;:16;1385:2;1365:22;1361:72;;-1:-1:-1;1419:1:64;1403:19;;1361:72;1783:4;1768:20;;1762:27;1828:4;1813:20;;1807:27;1881:4;1866:20;;1860:27;1499:9;1852:36;2799:66;2786:79;;2782:127;;;2896:1;2881:17;;;;;;;2782:127;2923:1;:7;;2928:2;2923:7;;:18;;;;;2934:1;:7;;2939:2;2934:7;;2923:18;2919:66;;;2972:1;2957:17;;;;;;;2919:66;3086:24;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;3086:24:64;;;;;;;;;;;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;-1:-1;;3086:24:64;;-1:-1:-1;;3086:24:64;;;1226:1891;-1:-1:-1;;;;;;;1226:1891:64:o;3925:865:22:-;4061:7;4033:14;243:13:7;;225:14;:31;217:84;;;;-1:-1:-1;;;217:84:7;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4088:6:22;;-1:-1:-1;;;;;4088:6:22;4080:55;;;;;-1:-1:-1;;;4080:55:22;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;4153:18:22;;;;;;:7;:18;;;;;;;;:27;4145:92;;;;-1:-1:-1;;;4145:92:22;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;4247:18:22;;;;;;;:7;:18;;;;;;;;:25;;-1:-1:-1;;4247:25:22;4268:4;4247:25;;;;;;4304:13;:34;;-1:-1:-1;;;4304:34:22;;;;;;;;;;;4247:18;;4304:13;;:23;;:34;;;;;4247:18;4304:34;;;;;:13;:34;;;5:2:-1;;;;30:1;27;20:12;5:2;4304:34:22;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;4304:34:22;;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;4304:34:22;4352:5;;4304:34;;-1:-1:-1;;;;;;4352:5:22;:26;4348:94;;4408:5;;:23;;;-1:-1:-1;;;4408:23:22;;;;;;;;;;-1:-1:-1;;;;;4408:5:22;;;;:10;;:23;;;;;;;;;;;;;;;:5;:23;;;5:2:-1;;;;30:1;27;20:12;5:2;4408:23:22;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;4408:23:22;;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;4408:23:22;;-1:-1:-1;4348:94:22;-1:-1:-1;;;;;4455:26:22;;4451:81;;4512:9;4497:24;;4451:81;4578:6;;;:14;;;-1:-1:-1;;;4578:14:22;;;;-1:-1:-1;;;;;4578:6:22;;;;:12;;:14;;;;;;;;;;;;:6;:14;;;5:2:-1;;;;30:1;27;20:12;5:2;4578:14:22;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;4578:14:22;;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;4578:14:22;4653:6;;;4558:103;;;-1:-1:-1;;;4558:103:22;;;;;;;;-1:-1:-1;;;;;4558:103:22;;;;;;;4653:6;;;4558:103;;;;;:59;;;;;:103;;;;;4578:14;;4558:103;;;;;;;;4653:6;4558:59;:103;;;5:2:-1;;;;30:1;27;20:12;5:2;4558:103:22;;;;8:9:-1;5:2;;;45:16;42:1;39;24:38;77:16;74:1;67:27;5:2;4558:103:22;;;;;;;13:2:-1;8:3;5:11;2:2;;;29:1;26;19:12;2:2;-1:-1;4558:103:22;4541:155;;;;;-1:-1:-1;;;4541:155:22;;;;;;;;;;;;;;;;;;;;;;;;;;;;4732:9;-1:-1:-1;;;;;4711:44:22;4718:12;-1:-1:-1;;;;;4711:44:22;;4743:11;4711:44;;;;;;;;;;;;;;;;;;4772:11;3925:865;-1:-1:-1;;;;;3925:865:22:o;658:187:7:-;764:1;739:13;:27;731:67;;;;;-1:-1:-1;;;731:67:7;;;;;;;;;;;;;;;;;;;;;;;;;;;;808:13;:30;658:187::o","source":"pragma solidity 0.5.13;\n\nimport \"../controller/Controller.sol\";\nimport \"openzeppelin-solidity/contracts/token/ERC20/IERC20.sol\";\nimport \"./CurveInterface.sol\";\nimport \"openzeppelin-solidity/contracts/cryptography/ECDSA.sol\";\nimport \"openzeppelin-solidity/contracts/math/SafeMath.sol\";\nimport \"./Agreement.sol\";\n\n/**\n * @title A scheme for reputation allocation according to token balances\n *        This contract is assuming that the token contract is paused, and one cannot transfer its tokens.\n */\n\ncontract ReputationFromToken is Agreement {\n    using ECDSA for bytes32;\n    using SafeMath for uint256;\n\n    IERC20 public tokenContract;\n    CurveInterface public curve;\n    //      beneficiary -> bool\n    mapping(address     => bool) public redeems;\n    Avatar public avatar;\n\n    // Digest describing the data the user signs according EIP 712.\n    // Needs to match what is passed to Metamask.\n    bytes32 public constant DELEGATION_HASH_EIP712 =\n    keccak256(abi.encodePacked(\n    \"address ReputationFromTokenAddress\",\n    \"address Beneficiary\",\n    \"bytes32 AgreementHash\"\n    ));\n\n    event Redeem(address indexed _beneficiary, address indexed _sender, uint256 _amount);\n\n    /**\n     * @dev initialize\n     * @param _avatar the avatar to mint reputation from\n     * @param _tokenContract the token contract\n     * @param _agreementHash is a hash of agreement required to be added to the TX by participants\n     */\n    function initialize(Avatar _avatar, IERC20 _tokenContract, CurveInterface _curve, bytes32 _agreementHash) external\n    {\n        require(avatar == Avatar(0), \"can be called only one time\");\n        require(_avatar != Avatar(0), \"avatar cannot be zero\");\n        tokenContract = _tokenContract;\n        avatar = _avatar;\n        curve = _curve;\n        super.setAgreementHash(_agreementHash);\n    }\n\n    /**\n     * @dev redeem function\n     * @param _beneficiary the beneficiary address to redeem for\n     * @param _agreementHash the agreementHash hash\n     * @return uint256 minted reputation\n     */\n    function redeem(address _beneficiary, bytes32 _agreementHash) external returns(uint256) {\n        return _redeem(_beneficiary, msg.sender, _agreementHash);\n    }\n\n    /**\n     * @dev redeemWithSignature function\n     * @param _beneficiary the beneficiary address to redeem for\n     * @param _signatureType signature type\n              1 - for web3.eth.sign\n              2 - for eth_signTypedData according to EIP #712.\n     * @param _signature  - signed data by the staker\n     * @return uint256 minted reputation\n     */\n    function redeemWithSignature(\n        address _beneficiary,\n        bytes32 _agreementHash,\n        uint256 _signatureType,\n        bytes calldata _signature\n        )\n        external\n        returns(uint256)\n        {\n        // Recreate the digest the user signed\n        bytes32 delegationDigest;\n        if (_signatureType == 2) {\n            delegationDigest = keccak256(\n                abi.encodePacked(\n                    DELEGATION_HASH_EIP712, keccak256(\n                        abi.encodePacked(\n                        address(this),\n                        _beneficiary,\n                        _agreementHash)\n                    )\n                )\n            );\n        } else {\n            delegationDigest = keccak256(\n                        abi.encodePacked(\n                        address(this),\n                        _beneficiary,\n                        _agreementHash)\n                    ).toEthSignedMessageHash();\n        }\n        address redeemer = delegationDigest.recover(_signature);\n        require(redeemer != address(0), \"redeemer address cannot be 0\");\n        return _redeem(_beneficiary, redeemer, _agreementHash);\n    }\n\n    /**\n     * @dev redeem function\n     * @param _beneficiary the beneficiary address to redeem for\n     * @param _redeemer the redeemer address\n     * @return uint256 minted reputation\n     */\n    function _redeem(address _beneficiary, address _redeemer, bytes32 _agreementHash)\n    private\n    onlyAgree(_agreementHash)\n    returns(uint256) {\n        require(avatar != Avatar(0), \"should initialize first\");\n        require(redeems[_redeemer] == false, \"redeeming twice from the same account is not allowed\");\n        redeems[_redeemer] = true;\n        uint256 tokenAmount = tokenContract.balanceOf(_redeemer);\n        if (curve != CurveInterface(0)) {\n            tokenAmount = curve.calc(tokenAmount);\n        }\n        if (_beneficiary == address(0)) {\n            _beneficiary = _redeemer;\n        }\n        require(\n        Controller(\n        avatar.owner())\n        .mintReputation(tokenAmount, _beneficiary, address(avatar)), \"mint reputation should succeed\");\n        emit Redeem(_beneficiary, _redeemer, tokenAmount);\n        return tokenAmount;\n    }\n}\n","sourcePath":"/Users/oren/daostack/arc/contracts/schemes/ReputationFromToken.sol","ast":{"absolutePath":"/Users/oren/daostack/arc/contracts/schemes/ReputationFromToken.sol","exportedSymbols":{"ReputationFromToken":[8420]},"id":8421,"nodeType":"SourceUnit","nodes":[{"id":8138,"literals":["solidity","0.5",".13"],"nodeType":"PragmaDirective","src":"0:23:22"},{"absolutePath":"/Users/oren/daostack/arc/contracts/controller/Controller.sol","file":"../controller/Controller.sol","id":8139,"nodeType":"ImportDirective","scope":8421,"sourceUnit":1798,"src":"25:38:22","symbolAliases":[],"unitAlias":""},{"absolutePath":"openzeppelin-solidity/contracts/token/ERC20/IERC20.sol","file":"openzeppelin-solidity/contracts/token/ERC20/IERC20.sol","id":8140,"nodeType":"ImportDirective","scope":8421,"sourceUnit":21018,"src":"64:64:22","symbolAliases":[],"unitAlias":""},{"absolutePath":"/Users/oren/daostack/arc/contracts/schemes/CurveInterface.sol","file":"./CurveInterface.sol","id":8141,"nodeType":"ImportDirective","scope":8421,"sourceUnit":6304,"src":"129:30:22","symbolAliases":[],"unitAlias":""},{"absolutePath":"openzeppelin-solidity/contracts/cryptography/ECDSA.sol","file":"openzeppelin-solidity/contracts/cryptography/ECDSA.sol","id":8142,"nodeType":"ImportDirective","scope":8421,"sourceUnit":20140,"src":"160:64:22","symbolAliases":[],"unitAlias":""},{"absolutePath":"openzeppelin-solidity/contracts/math/SafeMath.sol","file":"openzeppelin-solidity/contracts/math/SafeMath.sol","id":8143,"nodeType":"ImportDirective","scope":8421,"sourceUnit":20396,"src":"225:59:22","symbolAliases":[],"unitAlias":""},{"absolutePath":"/Users/oren/daostack/arc/contracts/schemes/Agreement.sol","file":"./Agreement.sol","id":8144,"nodeType":"ImportDirective","scope":8421,"sourceUnit":2303,"src":"285:25:22","symbolAliases":[],"unitAlias":""},{"baseContracts":[{"arguments":null,"baseName":{"contractScope":null,"id":8145,"name":"Agreement","nodeType":"UserDefinedTypeName","referencedDeclaration":2302,"src":"533:9:22","typeDescriptions":{"typeIdentifier":"t_contract$_Agreement_$2302","typeString":"contract Agreement"}},"id":8146,"nodeType":"InheritanceSpecifier","src":"533:9:22"}],"contractDependencies":[2302],"contractKind":"contract","documentation":"@title A scheme for reputation allocation according to token balances\n       This contract is assuming that the token contract is paused, and one cannot transfer its tokens.","fullyImplemented":true,"id":8420,"linearizedBaseContracts":[8420,2302],"name":"ReputationFromToken","nodeType":"ContractDefinition","nodes":[{"id":8149,"libraryName":{"contractScope":null,"id":8147,"name":"ECDSA","nodeType":"UserDefinedTypeName","referencedDeclaration":20139,"src":"555:5:22","typeDescriptions":{"typeIdentifier":"t_contract$_ECDSA_$20139","typeString":"library ECDSA"}},"nodeType":"UsingForDirective","src":"549:24:22","typeName":{"id":8148,"name":"bytes32","nodeType":"ElementaryTypeName","src":"565:7:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}},{"id":8152,"libraryName":{"contractScope":null,"id":8150,"name":"SafeMath","nodeType":"UserDefinedTypeName","referencedDeclaration":20395,"src":"584:8:22","typeDescriptions":{"typeIdentifier":"t_contract$_SafeMath_$20395","typeString":"library SafeMath"}},"nodeType":"UsingForDirective","src":"578:27:22","typeName":{"id":8151,"name":"uint256","nodeType":"ElementaryTypeName","src":"597:7:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}},{"constant":false,"id":8154,"name":"tokenContract","nodeType":"VariableDeclaration","scope":8420,"src":"611:27:22","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$21017","typeString":"contract IERC20"},"typeName":{"contractScope":null,"id":8153,"name":"IERC20","nodeType":"UserDefinedTypeName","referencedDeclaration":21017,"src":"611:6:22","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$21017","typeString":"contract IERC20"}},"value":null,"visibility":"public"},{"constant":false,"id":8156,"name":"curve","nodeType":"VariableDeclaration","scope":8420,"src":"644:27:22","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6303","typeString":"contract CurveInterface"},"typeName":{"contractScope":null,"id":8155,"name":"CurveInterface","nodeType":"UserDefinedTypeName","referencedDeclaration":6303,"src":"644:14:22","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6303","typeString":"contract CurveInterface"}},"value":null,"visibility":"public"},{"constant":false,"id":8160,"name":"redeems","nodeType":"VariableDeclaration","scope":8420,"src":"709:43:22","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_bool_$","typeString":"mapping(address => bool)"},"typeName":{"id":8159,"keyType":{"id":8157,"name":"address","nodeType":"ElementaryTypeName","src":"717:7:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Mapping","src":"709:28:22","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_bool_$","typeString":"mapping(address => bool)"},"valueType":{"id":8158,"name":"bool","nodeType":"ElementaryTypeName","src":"732:4:22","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}},"value":null,"visibility":"public"},{"constant":false,"id":8162,"name":"avatar","nodeType":"VariableDeclaration","scope":8420,"src":"758:20:22","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"},"typeName":{"contractScope":null,"id":8161,"name":"Avatar","nodeType":"UserDefinedTypeName","referencedDeclaration":337,"src":"758:6:22","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"value":null,"visibility":"public"},{"constant":true,"id":8172,"name":"DELEGATION_HASH_EIP712","nodeType":"VariableDeclaration","scope":8420,"src":"903:184:22","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":8163,"name":"bytes32","nodeType":"ElementaryTypeName","src":"903:7:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"616464726573732052657075746174696f6e46726f6d546f6b656e41646472657373","id":8167,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"988:36:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_855db04103fa88678d4ec68f8cee807e4ac4992d181ce035ea624bb0c8be6f9b","typeString":"literal_string \"address ReputationFromTokenAddress\""},"value":"address ReputationFromTokenAddress"},{"argumentTypes":null,"hexValue":"616464726573732042656e6566696369617279","id":8168,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"1030:21:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_8aac3dc7c972743a7a51b31820c9f35652dfa57834e4a271cc7863f813cc828b","typeString":"literal_string \"address Beneficiary\""},"value":"address Beneficiary"},{"argumentTypes":null,"hexValue":"627974657333322041677265656d656e7448617368","id":8169,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"1057:23:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_107fb6aab0fa542db1d44d9749a8fad7ef143f4965ce62a52ce5c96a8febadad","typeString":"literal_string \"bytes32 AgreementHash\""},"value":"bytes32 AgreementHash"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_stringliteral_855db04103fa88678d4ec68f8cee807e4ac4992d181ce035ea624bb0c8be6f9b","typeString":"literal_string \"address ReputationFromTokenAddress\""},{"typeIdentifier":"t_stringliteral_8aac3dc7c972743a7a51b31820c9f35652dfa57834e4a271cc7863f813cc828b","typeString":"literal_string \"address Beneficiary\""},{"typeIdentifier":"t_stringliteral_107fb6aab0fa542db1d44d9749a8fad7ef143f4965ce62a52ce5c96a8febadad","typeString":"literal_string \"bytes32 AgreementHash\""}],"expression":{"argumentTypes":null,"id":8165,"name":"abi","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":21094,"src":"966:3:22","typeDescriptions":{"typeIdentifier":"t_magic_abi","typeString":"abi"}},"id":8166,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberName":"encodePacked","nodeType":"MemberAccess","referencedDeclaration":null,"src":"966:16:22","typeDescriptions":{"typeIdentifier":"t_function_abiencodepacked_pure$__$returns$_t_bytes_memory_ptr_$","typeString":"function () pure returns (bytes memory)"}},"id":8170,"isConstant":false,"isLValue":false,"isPure":true,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"966:120:22","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}],"id":8164,"name":"keccak256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":21101,"src":"956:9:22","typeDescriptions":{"typeIdentifier":"t_function_keccak256_pure$_t_bytes_memory_ptr_$returns$_t_bytes32_$","typeString":"function (bytes memory) pure returns (bytes32)"}},"id":8171,"isConstant":false,"isLValue":false,"isPure":true,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"956:131:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"public"},{"anonymous":false,"documentation":null,"id":8180,"name":"Redeem","nodeType":"EventDefinition","parameters":{"id":8179,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8174,"indexed":true,"name":"_beneficiary","nodeType":"VariableDeclaration","scope":8180,"src":"1107:28:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":8173,"name":"address","nodeType":"ElementaryTypeName","src":"1107:7:22","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":8176,"indexed":true,"name":"_sender","nodeType":"VariableDeclaration","scope":8180,"src":"1137:23:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":8175,"name":"address","nodeType":"ElementaryTypeName","src":"1137:7:22","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":8178,"indexed":false,"name":"_amount","nodeType":"VariableDeclaration","scope":8180,"src":"1162:15:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8177,"name":"uint256","nodeType":"ElementaryTypeName","src":"1162:7:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"src":"1106:72:22"},"src":"1094:85:22"},{"body":{"id":8227,"nodeType":"Block","src":"1547:278:22","statements":[{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"commonType":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"},"id":8196,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":8192,"name":"avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8162,"src":"1565:6:22","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":8194,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1582:1:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":8193,"name":"Avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":337,"src":"1575:6:22","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Avatar_$337_$","typeString":"type(contract Avatar)"}},"id":8195,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1575:9:22","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"src":"1565:19:22","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"hexValue":"63616e2062652063616c6c6564206f6e6c79206f6e652074696d65","id":8197,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"1586:29:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_61459d8c2e83c03ac4ccaf4013950b2282c585e1eb42ab84ceae1eecfe85edd8","typeString":"literal_string \"can be called only one time\""},"value":"can be called only one time"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_61459d8c2e83c03ac4ccaf4013950b2282c585e1eb42ab84ceae1eecfe85edd8","typeString":"literal_string \"can be called only one time\""}],"id":8191,"name":"require","nodeType":"Identifier","overloadedDeclarations":[21110,21111],"referencedDeclaration":21111,"src":"1557:7:22","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":8198,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1557:59:22","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8199,"nodeType":"ExpressionStatement","src":"1557:59:22"},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"commonType":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"},"id":8205,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":8201,"name":"_avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8182,"src":"1634:7:22","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":8203,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1652:1:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":8202,"name":"Avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":337,"src":"1645:6:22","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Avatar_$337_$","typeString":"type(contract Avatar)"}},"id":8204,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1645:9:22","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"src":"1634:20:22","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"hexValue":"6176617461722063616e6e6f74206265207a65726f","id":8206,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"1656:23:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_3338e04ce106ab83a89a6f78ac95362796c47f8acb99702d3b473607a80d58e0","typeString":"literal_string \"avatar cannot be zero\""},"value":"avatar cannot be zero"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_3338e04ce106ab83a89a6f78ac95362796c47f8acb99702d3b473607a80d58e0","typeString":"literal_string \"avatar cannot be zero\""}],"id":8200,"name":"require","nodeType":"Identifier","overloadedDeclarations":[21110,21111],"referencedDeclaration":21111,"src":"1626:7:22","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":8207,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1626:54:22","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8208,"nodeType":"ExpressionStatement","src":"1626:54:22"},{"expression":{"argumentTypes":null,"id":8211,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":8209,"name":"tokenContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8154,"src":"1690:13:22","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$21017","typeString":"contract IERC20"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"id":8210,"name":"_tokenContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8184,"src":"1706:14:22","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$21017","typeString":"contract IERC20"}},"src":"1690:30:22","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$21017","typeString":"contract IERC20"}},"id":8212,"nodeType":"ExpressionStatement","src":"1690:30:22"},{"expression":{"argumentTypes":null,"id":8215,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":8213,"name":"avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8162,"src":"1730:6:22","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"id":8214,"name":"_avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8182,"src":"1739:7:22","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"src":"1730:16:22","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"id":8216,"nodeType":"ExpressionStatement","src":"1730:16:22"},{"expression":{"argumentTypes":null,"id":8219,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":8217,"name":"curve","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8156,"src":"1756:5:22","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6303","typeString":"contract CurveInterface"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"id":8218,"name":"_curve","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8186,"src":"1764:6:22","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6303","typeString":"contract CurveInterface"}},"src":"1756:14:22","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6303","typeString":"contract CurveInterface"}},"id":8220,"nodeType":"ExpressionStatement","src":"1756:14:22"},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":8224,"name":"_agreementHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8188,"src":"1803:14:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"expression":{"argumentTypes":null,"id":8221,"name":"super","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":21204,"src":"1780:5:22","typeDescriptions":{"typeIdentifier":"t_super$_ReputationFromToken_$8420","typeString":"contract super ReputationFromToken"}},"id":8223,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"setAgreementHash","nodeType":"MemberAccess","referencedDeclaration":2301,"src":"1780:22:22","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_bytes32_$returns$__$","typeString":"function (bytes32)"}},"id":8225,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1780:38:22","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8226,"nodeType":"ExpressionStatement","src":"1780:38:22"}]},"documentation":"@dev initialize\n@param _avatar the avatar to mint reputation from\n@param _tokenContract the token contract\n@param _agreementHash is a hash of agreement required to be added to the TX by participants","id":8228,"implemented":true,"kind":"function","modifiers":[],"name":"initialize","nodeType":"FunctionDefinition","parameters":{"id":8189,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8182,"name":"_avatar","nodeType":"VariableDeclaration","scope":8228,"src":"1448:14:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"},"typeName":{"contractScope":null,"id":8181,"name":"Avatar","nodeType":"UserDefinedTypeName","referencedDeclaration":337,"src":"1448:6:22","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"value":null,"visibility":"internal"},{"constant":false,"id":8184,"name":"_tokenContract","nodeType":"VariableDeclaration","scope":8228,"src":"1464:21:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$21017","typeString":"contract IERC20"},"typeName":{"contractScope":null,"id":8183,"name":"IERC20","nodeType":"UserDefinedTypeName","referencedDeclaration":21017,"src":"1464:6:22","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$21017","typeString":"contract IERC20"}},"value":null,"visibility":"internal"},{"constant":false,"id":8186,"name":"_curve","nodeType":"VariableDeclaration","scope":8228,"src":"1487:21:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6303","typeString":"contract CurveInterface"},"typeName":{"contractScope":null,"id":8185,"name":"CurveInterface","nodeType":"UserDefinedTypeName","referencedDeclaration":6303,"src":"1487:14:22","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6303","typeString":"contract CurveInterface"}},"value":null,"visibility":"internal"},{"constant":false,"id":8188,"name":"_agreementHash","nodeType":"VariableDeclaration","scope":8228,"src":"1510:22:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":8187,"name":"bytes32","nodeType":"ElementaryTypeName","src":"1510:7:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"}],"src":"1447:86:22"},"returnParameters":{"id":8190,"nodeType":"ParameterList","parameters":[],"src":"1547:0:22"},"scope":8420,"src":"1428:397:22","stateMutability":"nonpayable","superFunction":null,"visibility":"external"},{"body":{"id":8244,"nodeType":"Block","src":"2121:73:22","statements":[{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":8238,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8230,"src":"2146:12:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"expression":{"argumentTypes":null,"id":8239,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":21107,"src":"2160:3:22","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":8240,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"sender","nodeType":"MemberAccess","referencedDeclaration":null,"src":"2160:10:22","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},{"argumentTypes":null,"id":8241,"name":"_agreementHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8232,"src":"2172:14:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address_payable","typeString":"address payable"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"id":8237,"name":"_redeem","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8419,"src":"2138:7:22","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_address_$_t_address_$_t_bytes32_$returns$_t_uint256_$","typeString":"function (address,address,bytes32) returns (uint256)"}},"id":8242,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2138:49:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":8236,"id":8243,"nodeType":"Return","src":"2131:56:22"}]},"documentation":"@dev redeem function\n@param _beneficiary the beneficiary address to redeem for\n@param _agreementHash the agreementHash hash\n@return uint256 minted reputation","id":8245,"implemented":true,"kind":"function","modifiers":[],"name":"redeem","nodeType":"FunctionDefinition","parameters":{"id":8233,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8230,"name":"_beneficiary","nodeType":"VariableDeclaration","scope":8245,"src":"2049:20:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":8229,"name":"address","nodeType":"ElementaryTypeName","src":"2049:7:22","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":8232,"name":"_agreementHash","nodeType":"VariableDeclaration","scope":8245,"src":"2071:22:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":8231,"name":"bytes32","nodeType":"ElementaryTypeName","src":"2071:7:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"}],"src":"2048:46:22"},"returnParameters":{"id":8236,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8235,"name":"","nodeType":"VariableDeclaration","scope":8245,"src":"2112:7:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8234,"name":"uint256","nodeType":"ElementaryTypeName","src":"2112:7:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"src":"2111:9:22"},"scope":8420,"src":"2033:161:22","stateMutability":"nonpayable","superFunction":null,"visibility":"external"},{"body":{"id":8323,"nodeType":"Block","src":"2778:946:22","statements":[{"assignments":[8259],"declarations":[{"constant":false,"id":8259,"name":"delegationDigest","nodeType":"VariableDeclaration","scope":8323,"src":"2835:24:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":8258,"name":"bytes32","nodeType":"ElementaryTypeName","src":"2835:7:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"}],"id":8260,"initialValue":null,"nodeType":"VariableDeclarationStatement","src":"2835:24:22"},{"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":8263,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":8261,"name":"_signatureType","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8251,"src":"2873:14:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"argumentTypes":null,"hexValue":"32","id":8262,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2891:1:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"src":"2873:19:22","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":8299,"nodeType":"Block","src":"3256:260:22","statements":[{"expression":{"argumentTypes":null,"id":8297,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":8284,"name":"delegationDigest","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8259,"src":"3270:16:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"arguments":[],"expression":{"argumentTypes":[],"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":8289,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":21203,"src":"3374:4:22","typeDescriptions":{"typeIdentifier":"t_contract$_ReputationFromToken_$8420","typeString":"contract ReputationFromToken"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_ReputationFromToken_$8420","typeString":"contract ReputationFromToken"}],"id":8288,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3366:7:22","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":"address"},"id":8290,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3366:13:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":8291,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8247,"src":"3405:12:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":8292,"name":"_agreementHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8249,"src":"3443:14:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"expression":{"argumentTypes":null,"id":8286,"name":"abi","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":21094,"src":"3324:3:22","typeDescriptions":{"typeIdentifier":"t_magic_abi","typeString":"abi"}},"id":8287,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberName":"encodePacked","nodeType":"MemberAccess","referencedDeclaration":null,"src":"3324:16:22","typeDescriptions":{"typeIdentifier":"t_function_abiencodepacked_pure$__$returns$_t_bytes_memory_ptr_$","typeString":"function () pure returns (bytes memory)"}},"id":8293,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3324:134:22","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}],"id":8285,"name":"keccak256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":21101,"src":"3289:9:22","typeDescriptions":{"typeIdentifier":"t_function_keccak256_pure$_t_bytes_memory_ptr_$returns$_t_bytes32_$","typeString":"function (bytes memory) pure returns (bytes32)"}},"id":8294,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3289:191:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":8295,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"toEthSignedMessageHash","nodeType":"MemberAccess","referencedDeclaration":20138,"src":"3289:214:22","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_bytes32_$returns$_t_bytes32_$bound_to$_t_bytes32_$","typeString":"function (bytes32) pure returns (bytes32)"}},"id":8296,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3289:216:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"3270:235:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":8298,"nodeType":"ExpressionStatement","src":"3270:235:22"}]},"id":8300,"nodeType":"IfStatement","src":"2869:647:22","trueBody":{"id":8283,"nodeType":"Block","src":"2894:356:22","statements":[{"expression":{"argumentTypes":null,"id":8281,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":8264,"name":"delegationDigest","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8259,"src":"2908:16:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":8268,"name":"DELEGATION_HASH_EIP712","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8172,"src":"2992:22:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":8273,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":21203,"src":"3101:4:22","typeDescriptions":{"typeIdentifier":"t_contract$_ReputationFromToken_$8420","typeString":"contract ReputationFromToken"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_ReputationFromToken_$8420","typeString":"contract ReputationFromToken"}],"id":8272,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3093:7:22","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":"address"},"id":8274,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3093:13:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":8275,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8247,"src":"3132:12:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":8276,"name":"_agreementHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8249,"src":"3170:14:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"expression":{"argumentTypes":null,"id":8270,"name":"abi","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":21094,"src":"3051:3:22","typeDescriptions":{"typeIdentifier":"t_magic_abi","typeString":"abi"}},"id":8271,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberName":"encodePacked","nodeType":"MemberAccess","referencedDeclaration":null,"src":"3051:16:22","typeDescriptions":{"typeIdentifier":"t_function_abiencodepacked_pure$__$returns$_t_bytes_memory_ptr_$","typeString":"function () pure returns (bytes memory)"}},"id":8277,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3051:134:22","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}],"id":8269,"name":"keccak256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":21101,"src":"3016:9:22","typeDescriptions":{"typeIdentifier":"t_function_keccak256_pure$_t_bytes_memory_ptr_$returns$_t_bytes32_$","typeString":"function (bytes memory) pure returns (bytes32)"}},"id":8278,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3016:191:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"expression":{"argumentTypes":null,"id":8266,"name":"abi","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":21094,"src":"2954:3:22","typeDescriptions":{"typeIdentifier":"t_magic_abi","typeString":"abi"}},"id":8267,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberName":"encodePacked","nodeType":"MemberAccess","referencedDeclaration":null,"src":"2954:16:22","typeDescriptions":{"typeIdentifier":"t_function_abiencodepacked_pure$__$returns$_t_bytes_memory_ptr_$","typeString":"function () pure returns (bytes memory)"}},"id":8279,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2954:271:22","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}],"id":8265,"name":"keccak256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":21101,"src":"2927:9:22","typeDescriptions":{"typeIdentifier":"t_function_keccak256_pure$_t_bytes_memory_ptr_$returns$_t_bytes32_$","typeString":"function (bytes memory) pure returns (bytes32)"}},"id":8280,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2927:312:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"2908:331:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":8282,"nodeType":"ExpressionStatement","src":"2908:331:22"}]}},{"assignments":[8302],"declarations":[{"constant":false,"id":8302,"name":"redeemer","nodeType":"VariableDeclaration","scope":8323,"src":"3525:16:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":8301,"name":"address","nodeType":"ElementaryTypeName","src":"3525:7:22","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"}],"id":8307,"initialValue":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":8305,"name":"_signature","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8253,"src":"3569:10:22","typeDescriptions":{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes calldata"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes calldata"}],"expression":{"argumentTypes":null,"id":8303,"name":"delegationDigest","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8259,"src":"3544:16:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":8304,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"recover","nodeType":"MemberAccess","referencedDeclaration":20122,"src":"3544:24:22","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_bytes32_$_t_bytes_memory_ptr_$returns$_t_address_$bound_to$_t_bytes32_$","typeString":"function (bytes32,bytes memory) pure returns (address)"}},"id":8306,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3544:36:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"VariableDeclarationStatement","src":"3525:55:22"},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":8313,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":8309,"name":"redeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8302,"src":"3598:8:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":8311,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3618:1:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":8310,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3610:7:22","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":"address"},"id":8312,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3610:10:22","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},"src":"3598:22:22","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"hexValue":"72656465656d657220616464726573732063616e6e6f742062652030","id":8314,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"3622:30:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_1dd1a9b2ffbe0d1ded5d8e7625b440be45642c5f735dba078df15bf3dbdffb59","typeString":"literal_string \"redeemer address cannot be 0\""},"value":"redeemer address cannot be 0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_1dd1a9b2ffbe0d1ded5d8e7625b440be45642c5f735dba078df15bf3dbdffb59","typeString":"literal_string \"redeemer address cannot be 0\""}],"id":8308,"name":"require","nodeType":"Identifier","overloadedDeclarations":[21110,21111],"referencedDeclaration":21111,"src":"3590:7:22","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":8315,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3590:63:22","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8316,"nodeType":"ExpressionStatement","src":"3590:63:22"},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":8318,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8247,"src":"3678:12:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":8319,"name":"redeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8302,"src":"3692:8:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":8320,"name":"_agreementHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8249,"src":"3702:14:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"id":8317,"name":"_redeem","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8419,"src":"3670:7:22","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_address_$_t_address_$_t_bytes32_$returns$_t_uint256_$","typeString":"function (address,address,bytes32) returns (uint256)"}},"id":8321,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3670:47:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":8257,"id":8322,"nodeType":"Return","src":"3663:54:22"}]},"documentation":"@dev redeemWithSignature function\n@param _beneficiary the beneficiary address to redeem for\n@param _signatureType signature type\n1 - for web3.eth.sign\n2 - for eth_signTypedData according to EIP #712.\n@param _signature  - signed data by the staker\n@return uint256 minted reputation","id":8324,"implemented":true,"kind":"function","modifiers":[],"name":"redeemWithSignature","nodeType":"FunctionDefinition","parameters":{"id":8254,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8247,"name":"_beneficiary","nodeType":"VariableDeclaration","scope":8324,"src":"2598:20:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":8246,"name":"address","nodeType":"ElementaryTypeName","src":"2598:7:22","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":8249,"name":"_agreementHash","nodeType":"VariableDeclaration","scope":8324,"src":"2628:22:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":8248,"name":"bytes32","nodeType":"ElementaryTypeName","src":"2628:7:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"},{"constant":false,"id":8251,"name":"_signatureType","nodeType":"VariableDeclaration","scope":8324,"src":"2660:22:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8250,"name":"uint256","nodeType":"ElementaryTypeName","src":"2660:7:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"},{"constant":false,"id":8253,"name":"_signature","nodeType":"VariableDeclaration","scope":8324,"src":"2692:25:22","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes"},"typeName":{"id":8252,"name":"bytes","nodeType":"ElementaryTypeName","src":"2692:5:22","typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes"}},"value":null,"visibility":"internal"}],"src":"2588:139:22"},"returnParameters":{"id":8257,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8256,"name":"","nodeType":"VariableDeclaration","scope":8324,"src":"2761:7:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8255,"name":"uint256","nodeType":"ElementaryTypeName","src":"2761:7:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"src":"2760:9:22"},"scope":8420,"src":"2560:1164:22","stateMutability":"nonpayable","superFunction":null,"visibility":"external"},{"body":{"id":8418,"nodeType":"Block","src":"4070:720:22","statements":[{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"commonType":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"},"id":8343,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":8339,"name":"avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8162,"src":"4088:6:22","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":8341,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4105:1:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":8340,"name":"Avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":337,"src":"4098:6:22","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Avatar_$337_$","typeString":"type(contract Avatar)"}},"id":8342,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4098:9:22","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"src":"4088:19:22","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"hexValue":"73686f756c6420696e697469616c697a65206669727374","id":8344,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"4109:25:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_561d5bddf15c4f8c2230fcefd793337c8655660b728b0387ea5593dd307089fa","typeString":"literal_string \"should initialize first\""},"value":"should initialize first"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_561d5bddf15c4f8c2230fcefd793337c8655660b728b0387ea5593dd307089fa","typeString":"literal_string \"should initialize first\""}],"id":8338,"name":"require","nodeType":"Identifier","overloadedDeclarations":[21110,21111],"referencedDeclaration":21111,"src":"4080:7:22","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":8345,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4080:55:22","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8346,"nodeType":"ExpressionStatement","src":"4080:55:22"},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":8352,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"baseExpression":{"argumentTypes":null,"id":8348,"name":"redeems","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8160,"src":"4153:7:22","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_bool_$","typeString":"mapping(address => bool)"}},"id":8350,"indexExpression":{"argumentTypes":null,"id":8349,"name":"_redeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8328,"src":"4161:9:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"4153:18:22","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"argumentTypes":null,"hexValue":"66616c7365","id":8351,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"4175:5:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"false"},"src":"4153:27:22","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"hexValue":"72656465656d696e672074776963652066726f6d207468652073616d65206163636f756e74206973206e6f7420616c6c6f776564","id":8353,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"4182:54:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_1b23ef334bc08b912a0c866d34d444243b06a0ba51e2ae70501e19ff1f44e0c9","typeString":"literal_string \"redeeming twice from the same account is not allowed\""},"value":"redeeming twice from the same account is not allowed"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_1b23ef334bc08b912a0c866d34d444243b06a0ba51e2ae70501e19ff1f44e0c9","typeString":"literal_string \"redeeming twice from the same account is not allowed\""}],"id":8347,"name":"require","nodeType":"Identifier","overloadedDeclarations":[21110,21111],"referencedDeclaration":21111,"src":"4145:7:22","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":8354,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4145:92:22","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8355,"nodeType":"ExpressionStatement","src":"4145:92:22"},{"expression":{"argumentTypes":null,"id":8360,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"baseExpression":{"argumentTypes":null,"id":8356,"name":"redeems","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8160,"src":"4247:7:22","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_bool_$","typeString":"mapping(address => bool)"}},"id":8358,"indexExpression":{"argumentTypes":null,"id":8357,"name":"_redeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8328,"src":"4255:9:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"4247:18:22","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"hexValue":"74727565","id":8359,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"4268:4:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"true"},"src":"4247:25:22","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":8361,"nodeType":"ExpressionStatement","src":"4247:25:22"},{"assignments":[8363],"declarations":[{"constant":false,"id":8363,"name":"tokenAmount","nodeType":"VariableDeclaration","scope":8418,"src":"4282:19:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8362,"name":"uint256","nodeType":"ElementaryTypeName","src":"4282:7:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"id":8368,"initialValue":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":8366,"name":"_redeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8328,"src":"4328:9:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"argumentTypes":null,"id":8364,"name":"tokenContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8154,"src":"4304:13:22","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$21017","typeString":"contract IERC20"}},"id":8365,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"balanceOf","nodeType":"MemberAccess","referencedDeclaration":20962,"src":"4304:23:22","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_uint256_$","typeString":"function (address) view external returns (uint256)"}},"id":8367,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4304:34:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4282:56:22"},{"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_contract$_CurveInterface_$6303","typeString":"contract CurveInterface"},"id":8373,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":8369,"name":"curve","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8156,"src":"4352:5:22","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6303","typeString":"contract CurveInterface"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":8371,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4376:1:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":8370,"name":"CurveInterface","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6303,"src":"4361:14:22","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_CurveInterface_$6303_$","typeString":"type(contract CurveInterface)"}},"id":8372,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4361:17:22","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6303","typeString":"contract CurveInterface"}},"src":"4352:26:22","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":null,"id":8382,"nodeType":"IfStatement","src":"4348:94:22","trueBody":{"id":8381,"nodeType":"Block","src":"4380:62:22","statements":[{"expression":{"argumentTypes":null,"id":8379,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":8374,"name":"tokenAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8363,"src":"4394:11:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":8377,"name":"tokenAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8363,"src":"4419:11:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"id":8375,"name":"curve","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8156,"src":"4408:5:22","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6303","typeString":"contract CurveInterface"}},"id":8376,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"calc","nodeType":"MemberAccess","referencedDeclaration":6302,"src":"4408:10:22","typeDescriptions":{"typeIdentifier":"t_function_external_pure$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256) pure external returns (uint256)"}},"id":8378,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4408:23:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4394:37:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":8380,"nodeType":"ExpressionStatement","src":"4394:37:22"}]}},{"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":8387,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":8383,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8326,"src":"4455:12:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":8385,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4479:1:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":8384,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4471:7:22","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":"address"},"id":8386,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4471:10:22","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},"src":"4455:26:22","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":null,"id":8393,"nodeType":"IfStatement","src":"4451:81:22","trueBody":{"id":8392,"nodeType":"Block","src":"4483:49:22","statements":[{"expression":{"argumentTypes":null,"id":8390,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":8388,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8326,"src":"4497:12:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"id":8389,"name":"_redeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8328,"src":"4512:9:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"4497:24:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":8391,"nodeType":"ExpressionStatement","src":"4497:24:22"}]}},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":8401,"name":"tokenAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8363,"src":"4618:11:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"argumentTypes":null,"id":8402,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8326,"src":"4631:12:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":8404,"name":"avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8162,"src":"4653:6:22","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}],"id":8403,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4645:7:22","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":"address"},"id":8405,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4645:15:22","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address_payable","typeString":"address payable"}],"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[],"expression":{"argumentTypes":[],"expression":{"argumentTypes":null,"id":8396,"name":"avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8162,"src":"4578:6:22","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"id":8397,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"owner","nodeType":"MemberAccess","referencedDeclaration":20432,"src":"4578:12:22","typeDescriptions":{"typeIdentifier":"t_function_external_view$__$returns$_t_address_$","typeString":"function () view external returns (address)"}},"id":8398,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4578:14:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":8395,"name":"Controller","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1797,"src":"4558:10:22","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Controller_$1797_$","typeString":"type(contract Controller)"}},"id":8399,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4558:35:22","typeDescriptions":{"typeIdentifier":"t_contract$_Controller_$1797","typeString":"contract Controller"}},"id":8400,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"mintReputation","nodeType":"MemberAccess","referencedDeclaration":730,"src":"4558:59:22","typeDescriptions":{"typeIdentifier":"t_function_external_nonpayable$_t_uint256_$_t_address_$_t_address_$returns$_t_bool_$","typeString":"function (uint256,address,address) external returns (bool)"}},"id":8406,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4558:103:22","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"hexValue":"6d696e742072657075746174696f6e2073686f756c642073756363656564","id":8407,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"4663:32:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_e3b0726feb8cb4c7438ba89955c351121d4188febc4d5dd6e026fd1c3a0edac6","typeString":"literal_string \"mint reputation should succeed\""},"value":"mint reputation should succeed"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_e3b0726feb8cb4c7438ba89955c351121d4188febc4d5dd6e026fd1c3a0edac6","typeString":"literal_string \"mint reputation should succeed\""}],"id":8394,"name":"require","nodeType":"Identifier","overloadedDeclarations":[21110,21111],"referencedDeclaration":21111,"src":"4541:7:22","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":8408,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4541:155:22","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8409,"nodeType":"ExpressionStatement","src":"4541:155:22"},{"eventCall":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":8411,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8326,"src":"4718:12:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":8412,"name":"_redeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8328,"src":"4732:9:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":8413,"name":"tokenAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8363,"src":"4743:11:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":8410,"name":"Redeem","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8180,"src":"4711:6:22","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_address_$_t_uint256_$returns$__$","typeString":"function (address,address,uint256)"}},"id":8414,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4711:44:22","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8415,"nodeType":"EmitStatement","src":"4706:49:22"},{"expression":{"argumentTypes":null,"id":8416,"name":"tokenAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8363,"src":"4772:11:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":8337,"id":8417,"nodeType":"Return","src":"4765:18:22"}]},"documentation":"@dev redeem function\n@param _beneficiary the beneficiary address to redeem for\n@param _redeemer the redeemer address\n@return uint256 minted reputation","id":8419,"implemented":true,"kind":"function","modifiers":[{"arguments":[{"argumentTypes":null,"id":8333,"name":"_agreementHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8330,"src":"4033:14:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"id":8334,"modifierName":{"argumentTypes":null,"id":8332,"name":"onlyAgree","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2274,"src":"4023:9:22","typeDescriptions":{"typeIdentifier":"t_modifier$_t_bytes32_$","typeString":"modifier (bytes32)"}},"nodeType":"ModifierInvocation","src":"4023:25:22"}],"name":"_redeem","nodeType":"FunctionDefinition","parameters":{"id":8331,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8326,"name":"_beneficiary","nodeType":"VariableDeclaration","scope":8419,"src":"3942:20:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":8325,"name":"address","nodeType":"ElementaryTypeName","src":"3942:7:22","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":8328,"name":"_redeemer","nodeType":"VariableDeclaration","scope":8419,"src":"3964:17:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":8327,"name":"address","nodeType":"ElementaryTypeName","src":"3964:7:22","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":8330,"name":"_agreementHash","nodeType":"VariableDeclaration","scope":8419,"src":"3983:22:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":8329,"name":"bytes32","nodeType":"ElementaryTypeName","src":"3983:7:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"}],"src":"3941:65:22"},"returnParameters":{"id":8337,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8336,"name":"","nodeType":"VariableDeclaration","scope":8419,"src":"4061:7:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8335,"name":"uint256","nodeType":"ElementaryTypeName","src":"4061:7:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"src":"4060:9:22"},"scope":8420,"src":"3925:865:22","stateMutability":"nonpayable","superFunction":null,"visibility":"private"}],"scope":8421,"src":"501:4291:22"}],"src":"0:4793:22"},"legacyAST":{"absolutePath":"/Users/oren/daostack/arc/contracts/schemes/ReputationFromToken.sol","exportedSymbols":{"ReputationFromToken":[8420]},"id":8421,"nodeType":"SourceUnit","nodes":[{"id":8138,"literals":["solidity","0.5",".13"],"nodeType":"PragmaDirective","src":"0:23:22"},{"absolutePath":"/Users/oren/daostack/arc/contracts/controller/Controller.sol","file":"../controller/Controller.sol","id":8139,"nodeType":"ImportDirective","scope":8421,"sourceUnit":1798,"src":"25:38:22","symbolAliases":[],"unitAlias":""},{"absolutePath":"openzeppelin-solidity/contracts/token/ERC20/IERC20.sol","file":"openzeppelin-solidity/contracts/token/ERC20/IERC20.sol","id":8140,"nodeType":"ImportDirective","scope":8421,"sourceUnit":21018,"src":"64:64:22","symbolAliases":[],"unitAlias":""},{"absolutePath":"/Users/oren/daostack/arc/contracts/schemes/CurveInterface.sol","file":"./CurveInterface.sol","id":8141,"nodeType":"ImportDirective","scope":8421,"sourceUnit":6304,"src":"129:30:22","symbolAliases":[],"unitAlias":""},{"absolutePath":"openzeppelin-solidity/contracts/cryptography/ECDSA.sol","file":"openzeppelin-solidity/contracts/cryptography/ECDSA.sol","id":8142,"nodeType":"ImportDirective","scope":8421,"sourceUnit":20140,"src":"160:64:22","symbolAliases":[],"unitAlias":""},{"absolutePath":"openzeppelin-solidity/contracts/math/SafeMath.sol","file":"openzeppelin-solidity/contracts/math/SafeMath.sol","id":8143,"nodeType":"ImportDirective","scope":8421,"sourceUnit":20396,"src":"225:59:22","symbolAliases":[],"unitAlias":""},{"absolutePath":"/Users/oren/daostack/arc/contracts/schemes/Agreement.sol","file":"./Agreement.sol","id":8144,"nodeType":"ImportDirective","scope":8421,"sourceUnit":2303,"src":"285:25:22","symbolAliases":[],"unitAlias":""},{"baseContracts":[{"arguments":null,"baseName":{"contractScope":null,"id":8145,"name":"Agreement","nodeType":"UserDefinedTypeName","referencedDeclaration":2302,"src":"533:9:22","typeDescriptions":{"typeIdentifier":"t_contract$_Agreement_$2302","typeString":"contract Agreement"}},"id":8146,"nodeType":"InheritanceSpecifier","src":"533:9:22"}],"contractDependencies":[2302],"contractKind":"contract","documentation":"@title A scheme for reputation allocation according to token balances\n       This contract is assuming that the token contract is paused, and one cannot transfer its tokens.","fullyImplemented":true,"id":8420,"linearizedBaseContracts":[8420,2302],"name":"ReputationFromToken","nodeType":"ContractDefinition","nodes":[{"id":8149,"libraryName":{"contractScope":null,"id":8147,"name":"ECDSA","nodeType":"UserDefinedTypeName","referencedDeclaration":20139,"src":"555:5:22","typeDescriptions":{"typeIdentifier":"t_contract$_ECDSA_$20139","typeString":"library ECDSA"}},"nodeType":"UsingForDirective","src":"549:24:22","typeName":{"id":8148,"name":"bytes32","nodeType":"ElementaryTypeName","src":"565:7:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}},{"id":8152,"libraryName":{"contractScope":null,"id":8150,"name":"SafeMath","nodeType":"UserDefinedTypeName","referencedDeclaration":20395,"src":"584:8:22","typeDescriptions":{"typeIdentifier":"t_contract$_SafeMath_$20395","typeString":"library SafeMath"}},"nodeType":"UsingForDirective","src":"578:27:22","typeName":{"id":8151,"name":"uint256","nodeType":"ElementaryTypeName","src":"597:7:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}},{"constant":false,"id":8154,"name":"tokenContract","nodeType":"VariableDeclaration","scope":8420,"src":"611:27:22","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$21017","typeString":"contract IERC20"},"typeName":{"contractScope":null,"id":8153,"name":"IERC20","nodeType":"UserDefinedTypeName","referencedDeclaration":21017,"src":"611:6:22","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$21017","typeString":"contract IERC20"}},"value":null,"visibility":"public"},{"constant":false,"id":8156,"name":"curve","nodeType":"VariableDeclaration","scope":8420,"src":"644:27:22","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6303","typeString":"contract CurveInterface"},"typeName":{"contractScope":null,"id":8155,"name":"CurveInterface","nodeType":"UserDefinedTypeName","referencedDeclaration":6303,"src":"644:14:22","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6303","typeString":"contract CurveInterface"}},"value":null,"visibility":"public"},{"constant":false,"id":8160,"name":"redeems","nodeType":"VariableDeclaration","scope":8420,"src":"709:43:22","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_bool_$","typeString":"mapping(address => bool)"},"typeName":{"id":8159,"keyType":{"id":8157,"name":"address","nodeType":"ElementaryTypeName","src":"717:7:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Mapping","src":"709:28:22","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_bool_$","typeString":"mapping(address => bool)"},"valueType":{"id":8158,"name":"bool","nodeType":"ElementaryTypeName","src":"732:4:22","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}},"value":null,"visibility":"public"},{"constant":false,"id":8162,"name":"avatar","nodeType":"VariableDeclaration","scope":8420,"src":"758:20:22","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"},"typeName":{"contractScope":null,"id":8161,"name":"Avatar","nodeType":"UserDefinedTypeName","referencedDeclaration":337,"src":"758:6:22","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"value":null,"visibility":"public"},{"constant":true,"id":8172,"name":"DELEGATION_HASH_EIP712","nodeType":"VariableDeclaration","scope":8420,"src":"903:184:22","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":8163,"name":"bytes32","nodeType":"ElementaryTypeName","src":"903:7:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"616464726573732052657075746174696f6e46726f6d546f6b656e41646472657373","id":8167,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"988:36:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_855db04103fa88678d4ec68f8cee807e4ac4992d181ce035ea624bb0c8be6f9b","typeString":"literal_string \"address ReputationFromTokenAddress\""},"value":"address ReputationFromTokenAddress"},{"argumentTypes":null,"hexValue":"616464726573732042656e6566696369617279","id":8168,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"1030:21:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_8aac3dc7c972743a7a51b31820c9f35652dfa57834e4a271cc7863f813cc828b","typeString":"literal_string \"address Beneficiary\""},"value":"address Beneficiary"},{"argumentTypes":null,"hexValue":"627974657333322041677265656d656e7448617368","id":8169,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"1057:23:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_107fb6aab0fa542db1d44d9749a8fad7ef143f4965ce62a52ce5c96a8febadad","typeString":"literal_string \"bytes32 AgreementHash\""},"value":"bytes32 AgreementHash"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_stringliteral_855db04103fa88678d4ec68f8cee807e4ac4992d181ce035ea624bb0c8be6f9b","typeString":"literal_string \"address ReputationFromTokenAddress\""},{"typeIdentifier":"t_stringliteral_8aac3dc7c972743a7a51b31820c9f35652dfa57834e4a271cc7863f813cc828b","typeString":"literal_string \"address Beneficiary\""},{"typeIdentifier":"t_stringliteral_107fb6aab0fa542db1d44d9749a8fad7ef143f4965ce62a52ce5c96a8febadad","typeString":"literal_string \"bytes32 AgreementHash\""}],"expression":{"argumentTypes":null,"id":8165,"name":"abi","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":21094,"src":"966:3:22","typeDescriptions":{"typeIdentifier":"t_magic_abi","typeString":"abi"}},"id":8166,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberName":"encodePacked","nodeType":"MemberAccess","referencedDeclaration":null,"src":"966:16:22","typeDescriptions":{"typeIdentifier":"t_function_abiencodepacked_pure$__$returns$_t_bytes_memory_ptr_$","typeString":"function () pure returns (bytes memory)"}},"id":8170,"isConstant":false,"isLValue":false,"isPure":true,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"966:120:22","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}],"id":8164,"name":"keccak256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":21101,"src":"956:9:22","typeDescriptions":{"typeIdentifier":"t_function_keccak256_pure$_t_bytes_memory_ptr_$returns$_t_bytes32_$","typeString":"function (bytes memory) pure returns (bytes32)"}},"id":8171,"isConstant":false,"isLValue":false,"isPure":true,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"956:131:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"public"},{"anonymous":false,"documentation":null,"id":8180,"name":"Redeem","nodeType":"EventDefinition","parameters":{"id":8179,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8174,"indexed":true,"name":"_beneficiary","nodeType":"VariableDeclaration","scope":8180,"src":"1107:28:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":8173,"name":"address","nodeType":"ElementaryTypeName","src":"1107:7:22","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":8176,"indexed":true,"name":"_sender","nodeType":"VariableDeclaration","scope":8180,"src":"1137:23:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":8175,"name":"address","nodeType":"ElementaryTypeName","src":"1137:7:22","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":8178,"indexed":false,"name":"_amount","nodeType":"VariableDeclaration","scope":8180,"src":"1162:15:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8177,"name":"uint256","nodeType":"ElementaryTypeName","src":"1162:7:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"src":"1106:72:22"},"src":"1094:85:22"},{"body":{"id":8227,"nodeType":"Block","src":"1547:278:22","statements":[{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"commonType":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"},"id":8196,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":8192,"name":"avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8162,"src":"1565:6:22","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":8194,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1582:1:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":8193,"name":"Avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":337,"src":"1575:6:22","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Avatar_$337_$","typeString":"type(contract Avatar)"}},"id":8195,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1575:9:22","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"src":"1565:19:22","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"hexValue":"63616e2062652063616c6c6564206f6e6c79206f6e652074696d65","id":8197,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"1586:29:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_61459d8c2e83c03ac4ccaf4013950b2282c585e1eb42ab84ceae1eecfe85edd8","typeString":"literal_string \"can be called only one time\""},"value":"can be called only one time"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_61459d8c2e83c03ac4ccaf4013950b2282c585e1eb42ab84ceae1eecfe85edd8","typeString":"literal_string \"can be called only one time\""}],"id":8191,"name":"require","nodeType":"Identifier","overloadedDeclarations":[21110,21111],"referencedDeclaration":21111,"src":"1557:7:22","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":8198,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1557:59:22","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8199,"nodeType":"ExpressionStatement","src":"1557:59:22"},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"commonType":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"},"id":8205,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":8201,"name":"_avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8182,"src":"1634:7:22","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":8203,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1652:1:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":8202,"name":"Avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":337,"src":"1645:6:22","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Avatar_$337_$","typeString":"type(contract Avatar)"}},"id":8204,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1645:9:22","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"src":"1634:20:22","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"hexValue":"6176617461722063616e6e6f74206265207a65726f","id":8206,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"1656:23:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_3338e04ce106ab83a89a6f78ac95362796c47f8acb99702d3b473607a80d58e0","typeString":"literal_string \"avatar cannot be zero\""},"value":"avatar cannot be zero"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_3338e04ce106ab83a89a6f78ac95362796c47f8acb99702d3b473607a80d58e0","typeString":"literal_string \"avatar cannot be zero\""}],"id":8200,"name":"require","nodeType":"Identifier","overloadedDeclarations":[21110,21111],"referencedDeclaration":21111,"src":"1626:7:22","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":8207,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1626:54:22","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8208,"nodeType":"ExpressionStatement","src":"1626:54:22"},{"expression":{"argumentTypes":null,"id":8211,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":8209,"name":"tokenContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8154,"src":"1690:13:22","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$21017","typeString":"contract IERC20"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"id":8210,"name":"_tokenContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8184,"src":"1706:14:22","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$21017","typeString":"contract IERC20"}},"src":"1690:30:22","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$21017","typeString":"contract IERC20"}},"id":8212,"nodeType":"ExpressionStatement","src":"1690:30:22"},{"expression":{"argumentTypes":null,"id":8215,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":8213,"name":"avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8162,"src":"1730:6:22","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"id":8214,"name":"_avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8182,"src":"1739:7:22","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"src":"1730:16:22","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"id":8216,"nodeType":"ExpressionStatement","src":"1730:16:22"},{"expression":{"argumentTypes":null,"id":8219,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":8217,"name":"curve","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8156,"src":"1756:5:22","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6303","typeString":"contract CurveInterface"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"id":8218,"name":"_curve","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8186,"src":"1764:6:22","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6303","typeString":"contract CurveInterface"}},"src":"1756:14:22","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6303","typeString":"contract CurveInterface"}},"id":8220,"nodeType":"ExpressionStatement","src":"1756:14:22"},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":8224,"name":"_agreementHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8188,"src":"1803:14:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"expression":{"argumentTypes":null,"id":8221,"name":"super","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":21204,"src":"1780:5:22","typeDescriptions":{"typeIdentifier":"t_super$_ReputationFromToken_$8420","typeString":"contract super ReputationFromToken"}},"id":8223,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"setAgreementHash","nodeType":"MemberAccess","referencedDeclaration":2301,"src":"1780:22:22","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_bytes32_$returns$__$","typeString":"function (bytes32)"}},"id":8225,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"1780:38:22","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8226,"nodeType":"ExpressionStatement","src":"1780:38:22"}]},"documentation":"@dev initialize\n@param _avatar the avatar to mint reputation from\n@param _tokenContract the token contract\n@param _agreementHash is a hash of agreement required to be added to the TX by participants","id":8228,"implemented":true,"kind":"function","modifiers":[],"name":"initialize","nodeType":"FunctionDefinition","parameters":{"id":8189,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8182,"name":"_avatar","nodeType":"VariableDeclaration","scope":8228,"src":"1448:14:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"},"typeName":{"contractScope":null,"id":8181,"name":"Avatar","nodeType":"UserDefinedTypeName","referencedDeclaration":337,"src":"1448:6:22","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"value":null,"visibility":"internal"},{"constant":false,"id":8184,"name":"_tokenContract","nodeType":"VariableDeclaration","scope":8228,"src":"1464:21:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$21017","typeString":"contract IERC20"},"typeName":{"contractScope":null,"id":8183,"name":"IERC20","nodeType":"UserDefinedTypeName","referencedDeclaration":21017,"src":"1464:6:22","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$21017","typeString":"contract IERC20"}},"value":null,"visibility":"internal"},{"constant":false,"id":8186,"name":"_curve","nodeType":"VariableDeclaration","scope":8228,"src":"1487:21:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6303","typeString":"contract CurveInterface"},"typeName":{"contractScope":null,"id":8185,"name":"CurveInterface","nodeType":"UserDefinedTypeName","referencedDeclaration":6303,"src":"1487:14:22","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6303","typeString":"contract CurveInterface"}},"value":null,"visibility":"internal"},{"constant":false,"id":8188,"name":"_agreementHash","nodeType":"VariableDeclaration","scope":8228,"src":"1510:22:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":8187,"name":"bytes32","nodeType":"ElementaryTypeName","src":"1510:7:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"}],"src":"1447:86:22"},"returnParameters":{"id":8190,"nodeType":"ParameterList","parameters":[],"src":"1547:0:22"},"scope":8420,"src":"1428:397:22","stateMutability":"nonpayable","superFunction":null,"visibility":"external"},{"body":{"id":8244,"nodeType":"Block","src":"2121:73:22","statements":[{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":8238,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8230,"src":"2146:12:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"expression":{"argumentTypes":null,"id":8239,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":21107,"src":"2160:3:22","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":8240,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"sender","nodeType":"MemberAccess","referencedDeclaration":null,"src":"2160:10:22","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},{"argumentTypes":null,"id":8241,"name":"_agreementHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8232,"src":"2172:14:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address_payable","typeString":"address payable"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"id":8237,"name":"_redeem","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8419,"src":"2138:7:22","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_address_$_t_address_$_t_bytes32_$returns$_t_uint256_$","typeString":"function (address,address,bytes32) returns (uint256)"}},"id":8242,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2138:49:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":8236,"id":8243,"nodeType":"Return","src":"2131:56:22"}]},"documentation":"@dev redeem function\n@param _beneficiary the beneficiary address to redeem for\n@param _agreementHash the agreementHash hash\n@return uint256 minted reputation","id":8245,"implemented":true,"kind":"function","modifiers":[],"name":"redeem","nodeType":"FunctionDefinition","parameters":{"id":8233,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8230,"name":"_beneficiary","nodeType":"VariableDeclaration","scope":8245,"src":"2049:20:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":8229,"name":"address","nodeType":"ElementaryTypeName","src":"2049:7:22","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":8232,"name":"_agreementHash","nodeType":"VariableDeclaration","scope":8245,"src":"2071:22:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":8231,"name":"bytes32","nodeType":"ElementaryTypeName","src":"2071:7:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"}],"src":"2048:46:22"},"returnParameters":{"id":8236,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8235,"name":"","nodeType":"VariableDeclaration","scope":8245,"src":"2112:7:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8234,"name":"uint256","nodeType":"ElementaryTypeName","src":"2112:7:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"src":"2111:9:22"},"scope":8420,"src":"2033:161:22","stateMutability":"nonpayable","superFunction":null,"visibility":"external"},{"body":{"id":8323,"nodeType":"Block","src":"2778:946:22","statements":[{"assignments":[8259],"declarations":[{"constant":false,"id":8259,"name":"delegationDigest","nodeType":"VariableDeclaration","scope":8323,"src":"2835:24:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":8258,"name":"bytes32","nodeType":"ElementaryTypeName","src":"2835:7:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"}],"id":8260,"initialValue":null,"nodeType":"VariableDeclarationStatement","src":"2835:24:22"},{"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":8263,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":8261,"name":"_signatureType","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8251,"src":"2873:14:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"argumentTypes":null,"hexValue":"32","id":8262,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2891:1:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"src":"2873:19:22","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":8299,"nodeType":"Block","src":"3256:260:22","statements":[{"expression":{"argumentTypes":null,"id":8297,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":8284,"name":"delegationDigest","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8259,"src":"3270:16:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"arguments":[],"expression":{"argumentTypes":[],"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":8289,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":21203,"src":"3374:4:22","typeDescriptions":{"typeIdentifier":"t_contract$_ReputationFromToken_$8420","typeString":"contract ReputationFromToken"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_ReputationFromToken_$8420","typeString":"contract ReputationFromToken"}],"id":8288,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3366:7:22","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":"address"},"id":8290,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3366:13:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":8291,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8247,"src":"3405:12:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":8292,"name":"_agreementHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8249,"src":"3443:14:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"expression":{"argumentTypes":null,"id":8286,"name":"abi","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":21094,"src":"3324:3:22","typeDescriptions":{"typeIdentifier":"t_magic_abi","typeString":"abi"}},"id":8287,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberName":"encodePacked","nodeType":"MemberAccess","referencedDeclaration":null,"src":"3324:16:22","typeDescriptions":{"typeIdentifier":"t_function_abiencodepacked_pure$__$returns$_t_bytes_memory_ptr_$","typeString":"function () pure returns (bytes memory)"}},"id":8293,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3324:134:22","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}],"id":8285,"name":"keccak256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":21101,"src":"3289:9:22","typeDescriptions":{"typeIdentifier":"t_function_keccak256_pure$_t_bytes_memory_ptr_$returns$_t_bytes32_$","typeString":"function (bytes memory) pure returns (bytes32)"}},"id":8294,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3289:191:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":8295,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"toEthSignedMessageHash","nodeType":"MemberAccess","referencedDeclaration":20138,"src":"3289:214:22","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_bytes32_$returns$_t_bytes32_$bound_to$_t_bytes32_$","typeString":"function (bytes32) pure returns (bytes32)"}},"id":8296,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3289:216:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"3270:235:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":8298,"nodeType":"ExpressionStatement","src":"3270:235:22"}]},"id":8300,"nodeType":"IfStatement","src":"2869:647:22","trueBody":{"id":8283,"nodeType":"Block","src":"2894:356:22","statements":[{"expression":{"argumentTypes":null,"id":8281,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":8264,"name":"delegationDigest","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8259,"src":"2908:16:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":8268,"name":"DELEGATION_HASH_EIP712","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8172,"src":"2992:22:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":8273,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":21203,"src":"3101:4:22","typeDescriptions":{"typeIdentifier":"t_contract$_ReputationFromToken_$8420","typeString":"contract ReputationFromToken"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_ReputationFromToken_$8420","typeString":"contract ReputationFromToken"}],"id":8272,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3093:7:22","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":"address"},"id":8274,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3093:13:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":8275,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8247,"src":"3132:12:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":8276,"name":"_agreementHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8249,"src":"3170:14:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"expression":{"argumentTypes":null,"id":8270,"name":"abi","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":21094,"src":"3051:3:22","typeDescriptions":{"typeIdentifier":"t_magic_abi","typeString":"abi"}},"id":8271,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberName":"encodePacked","nodeType":"MemberAccess","referencedDeclaration":null,"src":"3051:16:22","typeDescriptions":{"typeIdentifier":"t_function_abiencodepacked_pure$__$returns$_t_bytes_memory_ptr_$","typeString":"function () pure returns (bytes memory)"}},"id":8277,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3051:134:22","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}],"id":8269,"name":"keccak256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":21101,"src":"3016:9:22","typeDescriptions":{"typeIdentifier":"t_function_keccak256_pure$_t_bytes_memory_ptr_$returns$_t_bytes32_$","typeString":"function (bytes memory) pure returns (bytes32)"}},"id":8278,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3016:191:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"expression":{"argumentTypes":null,"id":8266,"name":"abi","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":21094,"src":"2954:3:22","typeDescriptions":{"typeIdentifier":"t_magic_abi","typeString":"abi"}},"id":8267,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberName":"encodePacked","nodeType":"MemberAccess","referencedDeclaration":null,"src":"2954:16:22","typeDescriptions":{"typeIdentifier":"t_function_abiencodepacked_pure$__$returns$_t_bytes_memory_ptr_$","typeString":"function () pure returns (bytes memory)"}},"id":8279,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2954:271:22","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}],"id":8265,"name":"keccak256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":21101,"src":"2927:9:22","typeDescriptions":{"typeIdentifier":"t_function_keccak256_pure$_t_bytes_memory_ptr_$returns$_t_bytes32_$","typeString":"function (bytes memory) pure returns (bytes32)"}},"id":8280,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"2927:312:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"2908:331:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":8282,"nodeType":"ExpressionStatement","src":"2908:331:22"}]}},{"assignments":[8302],"declarations":[{"constant":false,"id":8302,"name":"redeemer","nodeType":"VariableDeclaration","scope":8323,"src":"3525:16:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":8301,"name":"address","nodeType":"ElementaryTypeName","src":"3525:7:22","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"}],"id":8307,"initialValue":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":8305,"name":"_signature","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8253,"src":"3569:10:22","typeDescriptions":{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes calldata"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes calldata"}],"expression":{"argumentTypes":null,"id":8303,"name":"delegationDigest","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8259,"src":"3544:16:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":8304,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"recover","nodeType":"MemberAccess","referencedDeclaration":20122,"src":"3544:24:22","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_bytes32_$_t_bytes_memory_ptr_$returns$_t_address_$bound_to$_t_bytes32_$","typeString":"function (bytes32,bytes memory) pure returns (address)"}},"id":8306,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3544:36:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"VariableDeclarationStatement","src":"3525:55:22"},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":8313,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":8309,"name":"redeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8302,"src":"3598:8:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":8311,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3618:1:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":8310,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3610:7:22","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":"address"},"id":8312,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3610:10:22","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},"src":"3598:22:22","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"hexValue":"72656465656d657220616464726573732063616e6e6f742062652030","id":8314,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"3622:30:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_1dd1a9b2ffbe0d1ded5d8e7625b440be45642c5f735dba078df15bf3dbdffb59","typeString":"literal_string \"redeemer address cannot be 0\""},"value":"redeemer address cannot be 0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_1dd1a9b2ffbe0d1ded5d8e7625b440be45642c5f735dba078df15bf3dbdffb59","typeString":"literal_string \"redeemer address cannot be 0\""}],"id":8308,"name":"require","nodeType":"Identifier","overloadedDeclarations":[21110,21111],"referencedDeclaration":21111,"src":"3590:7:22","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":8315,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3590:63:22","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8316,"nodeType":"ExpressionStatement","src":"3590:63:22"},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":8318,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8247,"src":"3678:12:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":8319,"name":"redeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8302,"src":"3692:8:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":8320,"name":"_agreementHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8249,"src":"3702:14:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"id":8317,"name":"_redeem","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8419,"src":"3670:7:22","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_address_$_t_address_$_t_bytes32_$returns$_t_uint256_$","typeString":"function (address,address,bytes32) returns (uint256)"}},"id":8321,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"3670:47:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":8257,"id":8322,"nodeType":"Return","src":"3663:54:22"}]},"documentation":"@dev redeemWithSignature function\n@param _beneficiary the beneficiary address to redeem for\n@param _signatureType signature type\n1 - for web3.eth.sign\n2 - for eth_signTypedData according to EIP #712.\n@param _signature  - signed data by the staker\n@return uint256 minted reputation","id":8324,"implemented":true,"kind":"function","modifiers":[],"name":"redeemWithSignature","nodeType":"FunctionDefinition","parameters":{"id":8254,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8247,"name":"_beneficiary","nodeType":"VariableDeclaration","scope":8324,"src":"2598:20:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":8246,"name":"address","nodeType":"ElementaryTypeName","src":"2598:7:22","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":8249,"name":"_agreementHash","nodeType":"VariableDeclaration","scope":8324,"src":"2628:22:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":8248,"name":"bytes32","nodeType":"ElementaryTypeName","src":"2628:7:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"},{"constant":false,"id":8251,"name":"_signatureType","nodeType":"VariableDeclaration","scope":8324,"src":"2660:22:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8250,"name":"uint256","nodeType":"ElementaryTypeName","src":"2660:7:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"},{"constant":false,"id":8253,"name":"_signature","nodeType":"VariableDeclaration","scope":8324,"src":"2692:25:22","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes"},"typeName":{"id":8252,"name":"bytes","nodeType":"ElementaryTypeName","src":"2692:5:22","typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes"}},"value":null,"visibility":"internal"}],"src":"2588:139:22"},"returnParameters":{"id":8257,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8256,"name":"","nodeType":"VariableDeclaration","scope":8324,"src":"2761:7:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8255,"name":"uint256","nodeType":"ElementaryTypeName","src":"2761:7:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"src":"2760:9:22"},"scope":8420,"src":"2560:1164:22","stateMutability":"nonpayable","superFunction":null,"visibility":"external"},{"body":{"id":8418,"nodeType":"Block","src":"4070:720:22","statements":[{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"commonType":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"},"id":8343,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":8339,"name":"avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8162,"src":"4088:6:22","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":8341,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4105:1:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":8340,"name":"Avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":337,"src":"4098:6:22","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Avatar_$337_$","typeString":"type(contract Avatar)"}},"id":8342,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4098:9:22","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"src":"4088:19:22","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"hexValue":"73686f756c6420696e697469616c697a65206669727374","id":8344,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"4109:25:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_561d5bddf15c4f8c2230fcefd793337c8655660b728b0387ea5593dd307089fa","typeString":"literal_string \"should initialize first\""},"value":"should initialize first"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_561d5bddf15c4f8c2230fcefd793337c8655660b728b0387ea5593dd307089fa","typeString":"literal_string \"should initialize first\""}],"id":8338,"name":"require","nodeType":"Identifier","overloadedDeclarations":[21110,21111],"referencedDeclaration":21111,"src":"4080:7:22","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":8345,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4080:55:22","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8346,"nodeType":"ExpressionStatement","src":"4080:55:22"},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":8352,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"baseExpression":{"argumentTypes":null,"id":8348,"name":"redeems","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8160,"src":"4153:7:22","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_bool_$","typeString":"mapping(address => bool)"}},"id":8350,"indexExpression":{"argumentTypes":null,"id":8349,"name":"_redeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8328,"src":"4161:9:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"4153:18:22","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"argumentTypes":null,"hexValue":"66616c7365","id":8351,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"4175:5:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"false"},"src":"4153:27:22","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"hexValue":"72656465656d696e672074776963652066726f6d207468652073616d65206163636f756e74206973206e6f7420616c6c6f776564","id":8353,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"4182:54:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_1b23ef334bc08b912a0c866d34d444243b06a0ba51e2ae70501e19ff1f44e0c9","typeString":"literal_string \"redeeming twice from the same account is not allowed\""},"value":"redeeming twice from the same account is not allowed"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_1b23ef334bc08b912a0c866d34d444243b06a0ba51e2ae70501e19ff1f44e0c9","typeString":"literal_string \"redeeming twice from the same account is not allowed\""}],"id":8347,"name":"require","nodeType":"Identifier","overloadedDeclarations":[21110,21111],"referencedDeclaration":21111,"src":"4145:7:22","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":8354,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4145:92:22","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8355,"nodeType":"ExpressionStatement","src":"4145:92:22"},{"expression":{"argumentTypes":null,"id":8360,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"baseExpression":{"argumentTypes":null,"id":8356,"name":"redeems","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8160,"src":"4247:7:22","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_bool_$","typeString":"mapping(address => bool)"}},"id":8358,"indexExpression":{"argumentTypes":null,"id":8357,"name":"_redeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8328,"src":"4255:9:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"4247:18:22","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"hexValue":"74727565","id":8359,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"4268:4:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"true"},"src":"4247:25:22","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":8361,"nodeType":"ExpressionStatement","src":"4247:25:22"},{"assignments":[8363],"declarations":[{"constant":false,"id":8363,"name":"tokenAmount","nodeType":"VariableDeclaration","scope":8418,"src":"4282:19:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8362,"name":"uint256","nodeType":"ElementaryTypeName","src":"4282:7:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"id":8368,"initialValue":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":8366,"name":"_redeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8328,"src":"4328:9:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"argumentTypes":null,"id":8364,"name":"tokenContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8154,"src":"4304:13:22","typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$21017","typeString":"contract IERC20"}},"id":8365,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"balanceOf","nodeType":"MemberAccess","referencedDeclaration":20962,"src":"4304:23:22","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_uint256_$","typeString":"function (address) view external returns (uint256)"}},"id":8367,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4304:34:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4282:56:22"},{"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_contract$_CurveInterface_$6303","typeString":"contract CurveInterface"},"id":8373,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":8369,"name":"curve","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8156,"src":"4352:5:22","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6303","typeString":"contract CurveInterface"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":8371,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4376:1:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":8370,"name":"CurveInterface","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6303,"src":"4361:14:22","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_CurveInterface_$6303_$","typeString":"type(contract CurveInterface)"}},"id":8372,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4361:17:22","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6303","typeString":"contract CurveInterface"}},"src":"4352:26:22","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":null,"id":8382,"nodeType":"IfStatement","src":"4348:94:22","trueBody":{"id":8381,"nodeType":"Block","src":"4380:62:22","statements":[{"expression":{"argumentTypes":null,"id":8379,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":8374,"name":"tokenAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8363,"src":"4394:11:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":8377,"name":"tokenAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8363,"src":"4419:11:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"argumentTypes":null,"id":8375,"name":"curve","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8156,"src":"4408:5:22","typeDescriptions":{"typeIdentifier":"t_contract$_CurveInterface_$6303","typeString":"contract CurveInterface"}},"id":8376,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"calc","nodeType":"MemberAccess","referencedDeclaration":6302,"src":"4408:10:22","typeDescriptions":{"typeIdentifier":"t_function_external_pure$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256) pure external returns (uint256)"}},"id":8378,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4408:23:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4394:37:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":8380,"nodeType":"ExpressionStatement","src":"4394:37:22"}]}},{"condition":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":8387,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"argumentTypes":null,"id":8383,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8326,"src":"4455:12:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"hexValue":"30","id":8385,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4479:1:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":8384,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4471:7:22","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":"address"},"id":8386,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4471:10:22","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}},"src":"4455:26:22","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":null,"id":8393,"nodeType":"IfStatement","src":"4451:81:22","trueBody":{"id":8392,"nodeType":"Block","src":"4483:49:22","statements":[{"expression":{"argumentTypes":null,"id":8390,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"argumentTypes":null,"id":8388,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8326,"src":"4497:12:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"argumentTypes":null,"id":8389,"name":"_redeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8328,"src":"4512:9:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"4497:24:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":8391,"nodeType":"ExpressionStatement","src":"4497:24:22"}]}},{"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":8401,"name":"tokenAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8363,"src":"4618:11:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"argumentTypes":null,"id":8402,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8326,"src":"4631:12:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":8404,"name":"avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8162,"src":"4653:6:22","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}],"id":8403,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4645:7:22","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":"address"},"id":8405,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4645:15:22","typeDescriptions":{"typeIdentifier":"t_address_payable","typeString":"address payable"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address_payable","typeString":"address payable"}],"expression":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"arguments":[],"expression":{"argumentTypes":[],"expression":{"argumentTypes":null,"id":8396,"name":"avatar","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8162,"src":"4578:6:22","typeDescriptions":{"typeIdentifier":"t_contract$_Avatar_$337","typeString":"contract Avatar"}},"id":8397,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"owner","nodeType":"MemberAccess","referencedDeclaration":20432,"src":"4578:12:22","typeDescriptions":{"typeIdentifier":"t_function_external_view$__$returns$_t_address_$","typeString":"function () view external returns (address)"}},"id":8398,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4578:14:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":8395,"name":"Controller","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1797,"src":"4558:10:22","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Controller_$1797_$","typeString":"type(contract Controller)"}},"id":8399,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4558:35:22","typeDescriptions":{"typeIdentifier":"t_contract$_Controller_$1797","typeString":"contract Controller"}},"id":8400,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberName":"mintReputation","nodeType":"MemberAccess","referencedDeclaration":730,"src":"4558:59:22","typeDescriptions":{"typeIdentifier":"t_function_external_nonpayable$_t_uint256_$_t_address_$_t_address_$returns$_t_bool_$","typeString":"function (uint256,address,address) external returns (bool)"}},"id":8406,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4558:103:22","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"argumentTypes":null,"hexValue":"6d696e742072657075746174696f6e2073686f756c642073756363656564","id":8407,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"4663:32:22","subdenomination":null,"typeDescriptions":{"typeIdentifier":"t_stringliteral_e3b0726feb8cb4c7438ba89955c351121d4188febc4d5dd6e026fd1c3a0edac6","typeString":"literal_string \"mint reputation should succeed\""},"value":"mint reputation should succeed"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_e3b0726feb8cb4c7438ba89955c351121d4188febc4d5dd6e026fd1c3a0edac6","typeString":"literal_string \"mint reputation should succeed\""}],"id":8394,"name":"require","nodeType":"Identifier","overloadedDeclarations":[21110,21111],"referencedDeclaration":21111,"src":"4541:7:22","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":8408,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4541:155:22","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8409,"nodeType":"ExpressionStatement","src":"4541:155:22"},{"eventCall":{"argumentTypes":null,"arguments":[{"argumentTypes":null,"id":8411,"name":"_beneficiary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8326,"src":"4718:12:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":8412,"name":"_redeemer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8328,"src":"4732:9:22","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"argumentTypes":null,"id":8413,"name":"tokenAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8363,"src":"4743:11:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":8410,"name":"Redeem","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8180,"src":"4711:6:22","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_address_$_t_uint256_$returns$__$","typeString":"function (address,address,uint256)"}},"id":8414,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"names":[],"nodeType":"FunctionCall","src":"4711:44:22","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8415,"nodeType":"EmitStatement","src":"4706:49:22"},{"expression":{"argumentTypes":null,"id":8416,"name":"tokenAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8363,"src":"4772:11:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":8337,"id":8417,"nodeType":"Return","src":"4765:18:22"}]},"documentation":"@dev redeem function\n@param _beneficiary the beneficiary address to redeem for\n@param _redeemer the redeemer address\n@return uint256 minted reputation","id":8419,"implemented":true,"kind":"function","modifiers":[{"arguments":[{"argumentTypes":null,"id":8333,"name":"_agreementHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8330,"src":"4033:14:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"id":8334,"modifierName":{"argumentTypes":null,"id":8332,"name":"onlyAgree","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2274,"src":"4023:9:22","typeDescriptions":{"typeIdentifier":"t_modifier$_t_bytes32_$","typeString":"modifier (bytes32)"}},"nodeType":"ModifierInvocation","src":"4023:25:22"}],"name":"_redeem","nodeType":"FunctionDefinition","parameters":{"id":8331,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8326,"name":"_beneficiary","nodeType":"VariableDeclaration","scope":8419,"src":"3942:20:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":8325,"name":"address","nodeType":"ElementaryTypeName","src":"3942:7:22","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":8328,"name":"_redeemer","nodeType":"VariableDeclaration","scope":8419,"src":"3964:17:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":8327,"name":"address","nodeType":"ElementaryTypeName","src":"3964:7:22","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"value":null,"visibility":"internal"},{"constant":false,"id":8330,"name":"_agreementHash","nodeType":"VariableDeclaration","scope":8419,"src":"3983:22:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":8329,"name":"bytes32","nodeType":"ElementaryTypeName","src":"3983:7:22","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":null,"visibility":"internal"}],"src":"3941:65:22"},"returnParameters":{"id":8337,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8336,"name":"","nodeType":"VariableDeclaration","scope":8419,"src":"4061:7:22","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8335,"name":"uint256","nodeType":"ElementaryTypeName","src":"4061:7:22","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":null,"visibility":"internal"}],"src":"4060:9:22"},"scope":8420,"src":"3925:865:22","stateMutability":"nonpayable","superFunction":null,"visibility":"private"}],"scope":8421,"src":"501:4291:22"}],"src":"0:4793:22"},"compiler":{"name":"solc","version":"0.5.13+commit.5b0b510c.Emscripten.clang"},"networks":{},"schemaVersion":"3.0.20","updatedAt":"2020-02-10T15:44:06.134Z","devdoc":{"methods":{"getAgreementHash()":{"details":"getAgreementHash","return":"bytes32 agreementHash"},"initialize(address,address,address,bytes32)":{"details":"initialize","params":{"_agreementHash":"is a hash of agreement required to be added to the TX by participants","_avatar":"the avatar to mint reputation from","_tokenContract":"the token contract"}},"redeem(address,bytes32)":{"details":"redeem function","params":{"_agreementHash":"the agreementHash hash","_beneficiary":"the beneficiary address to redeem for"},"return":"uint256 minted reputation"},"redeemWithSignature(address,bytes32,uint256,bytes)":{"details":"redeemWithSignature function","params":{"_beneficiary":"the beneficiary address to redeem for","_signature":"- signed data by the staker","_signatureType":"signature type 1 - for web3.eth.sign 2 - for eth_signTypedData according to EIP #712."},"return":"uint256 minted reputation"}},"title":"A scheme for reputation allocation according to token balances       This contract is assuming that the token contract is paused, and one cannot transfer its tokens."},"userdoc":{"methods":{}}}